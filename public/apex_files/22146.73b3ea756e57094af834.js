(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[22146,78775,57606],{851637:t=>{t.exports={"tv-spinner__container-rotate":"tv-spinner__container-rotate-aLqboHuu"}},336748:(t,e,r)=>{"use strict";r.d(e,{colorsPalette:()=>u,getHexColorByName:()=>c});var s=r(380492),i=r(27086),n=r(650151);const a={...s,...i},o={},h=Object.keys(a).length,l=/^#(([a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i;function d(t,e=[],r=a){const s=r[t];if(!s)return null;if(l.test(s))return s;const i=s;return e.push(t),-1!==e.indexOf(i)?(console.warn("Colors definitions cycled"),s):e.length>h?(console.warn("Too many variables-link in HEX-color search: "+e[0]),null):d(i,e,r)}Object.keys(a).forEach((t=>{const e=d(t);o[t]=(0,n.ensureNotNull)(e)}));const u=o;function c(t,e=u){const r=e[t];if(!r){if(l.test(t))return t;throw new Error("No such color "+t)}return r}},685023:(t,e,r)=>{"use strict";r.d(e,{DEFAULT_SIZE:()=>s,spinnerSizeMap:()=>i});const s="large",i={mini:"xsmall",xxsmall:"xxsmall",xsmall:"xsmall",small:"small",medium:"medium",large:"large"}},941285:(t,e,r)=>{"use strict";r.r(e),r.d(e,{Spinner:()=>a,renderSpinnerTemplate:()=>n});r(851637);var s=r(877162),i=r(685023);function n(t=""){return`<div class="tv-spinner ${t}" role="progressbar"></div>`}class a{constructor(t){this._shown=!1,this._el=(0,s.parseHtmlElement)(n()),this.setSize(i.spinnerSizeMap[t||i.DEFAULT_SIZE])}spin(t){return this._el.classList.add("tv-spinner--shown"),void 0===this._container&&(this._container=t,void 0!==t&&t.appendChild(this._el)),this._shown=!0,this}stop(t){return t&&void 0!==this._container&&this._container.removeChild(this._el),this._el&&this._el.classList.remove("tv-spinner--shown"),this._shown=!1,this}setStyle(t){return Object.keys(t).forEach((e=>{const r=t[e];void 0!==r&&this._el.style.setProperty(e,r)})),this}style(){return this._el.style}setSize(t){const e=void 0!==t?`tv-spinner--size_${t}`:"";return this._el.className=`tv-spinner ${e} ${this._shown?"tv-spinner--shown":""}`,this}getEl(){return this._el}destroy(){this.stop(),delete this._el,delete this._container}}},100366:(t,e,r)=>{"use strict";async function s(){return(await Promise.all([r.e(27741),r.e(37479),r.e(30917),r.e(82321),r.e(20139)]).then(r.bind(r,254543))).ErrorCardRenderer}r.d(e,{getErrorCardRenderer:()=>s})},204389:(t,e,r)=>{"use strict";var s,i;function n(t,e){return"period-back"===t.type&&"period-back"===e.type?t.value===e.value:"time-range"===t.type&&"time-range"===e.type&&(t.from===e.from&&t.to===e.to)}r.d(e,{areEqualTimeFrames:()=>n}),function(t){t.extractErrorReason=function(t){return t.params[1]}}(s||(s={})),function(t){t.PeriodBack="period-back",t.TimeRange="time-range"}(i||(i={}))},251924:(t,e,r)=>{"use strict";r.d(e,{Delegate:()=>s.Delegate});var s=r(978956)},483102:(t,e,r)=>{"use strict";function s(t){const e=Object.create(t);return e.release=()=>{},e.ownership=()=>e,e}function i(t){const e=t;return e.release=()=>e.destroy(),e.ownership=()=>e,e}r.d(e,{ownership:()=>i,weakReference:()=>s})},87522:(t,e,r)=>{"use strict";r.d(e,{ConflatedChunksBuilder:()=>a})
;var s=r(650151),i=r(615790);const n=[{barsToMerge:10,forBarspacingLargerThen:.03},{barsToMerge:30,forBarspacingLargerThen:.01},{barsToMerge:100,forBarspacingLargerThen:.003},{barsToMerge:500,forBarspacingLargerThen:0}];class a{constructor(t,e){this._plots=t,this._state={chunks:new Map,priceSource:null,priceSourcesProvider:e},this._setEmptyConflatedChunks()}conflatedChunks(t,e){if(e!==this._state.priceSource){this._state.priceSource=e;const t=this._plots.first();t&&(this._setEmptyConflatedChunks(),this._rebuildConflatedChunks(t))}const r=(0,s.ensureDefined)(n.find((e=>e.forBarspacingLargerThen<=t)));return(0,s.ensureDefined)(this._state.chunks.get(r.barsToMerge))}mergeData(t){const e=this._plots.size(),r=this._plots.merge(t);return r&&null!==this._state.priceSource&&(e===this._plots.size()&&r.index===this._plots.lastIndex()?this._updateLatestChunks():this._rebuildConflatedChunks(r)),r}moveData(t){this._plots.move(t),this._plots.size()>0&&this._clearState()}clearData(){this._plots.clear(),this._clearState()}_rebuildConflatedChunks(t){const e=this._state.priceSource;if(null===e)return;const r=t.index,a=this._state.priceSourcesProvider(e),o=(t,e,r)=>{let s=null;for(const i of t){const t=a(i.value);s&&i.index-s.startTime>=r.barsToMerge&&(e.push(s),s=null),s?(s.endTime=i.index,s.high=Math.max(s.high,t),s.low=Math.min(s.low,t),s.close=t):s={startTime:i.index,endTime:i.index,open:t,high:t,low:t,close:t}}s&&e.push(s)};n.forEach((t=>{const e=(0,s.ensureDefined)(this._state.chunks.get(t.barsToMerge)),n=(0,i.lowerbound)(e,r,((t,e)=>t.endTime<e));if(0===n&&e.length>0){const r=e[0].startTime-1,i=(0,s.ensureNotNull)(this._plots.firstIndex()),n=this._plots.rangeIterator(i,r),a=[];o(n,a,t);const h=a.concat(e);this._state.chunks.set(t.barsToMerge,h)}else{const r=(0,s.ensureNotNull)(this._plots.lastIndex());e.splice(n);let i=(0,s.ensureNotNull)(this._plots.firstIndex());e.length&&(i=e[e.length-1].endTime+1);const a=this._plots.rangeIterator(i,r);o(a,e,t)}}))}_updateLatestChunks(){const t=(0,s.ensureNotNull)(this._plots.last()),e=this._state.priceSourcesProvider("close");n.forEach((r=>{const i=(0,s.ensureDefined)(this._state.chunks.get(r.barsToMerge)),n=e(t.value),a=i[i.length-1];a.high=Math.max(a.high,n),a.low=Math.min(a.low,n),a.close=n,a.endTime=t.index}))}_setEmptyConflatedChunks(){n.forEach((t=>this._state.chunks.set(t.barsToMerge,[])))}_clearState(){this._state.chunks.clear(),this._state.priceSource=null}}},303677:(t,e,r)=>{"use strict";r.d(e,{customFormatters:()=>s});const s={dateFormatter:null,timeFormatter:null,tickMarkFormatter:null,priceFormatterFactory:null,studyFormatterFactory:null}},514181:(t,e,r)=>{"use strict";r.d(e,{availableDateFormats:()=>b,dateFormatFunctions:()=>g,defaultDateFormat:()=>w,getDateFormatWithWeekday:()=>v,yyyy:()=>y});var s=r(444372),i=r(39654),n=r(866893);const a={1:()=>s.t(null,void 0,r(562310)),2:()=>s.t(null,void 0,r(302507)),3:()=>s.t(null,void 0,r(92767)),4:()=>s.t(null,void 0,r(227072)),5:()=>s.t(null,{context:"short"},r(13132)),6:()=>s.t(null,void 0,r(800429)),7:()=>s.t(null,void 0,r(853786)),
8:()=>s.t(null,void 0,r(546450)),9:()=>s.t(null,void 0,r(806816)),10:()=>s.t(null,void 0,r(912179)),11:()=>s.t(null,void 0,r(526899)),12:()=>s.t(null,void 0,r(532084))},o={1:()=>s.t(null,void 0,r(914568)),2:()=>s.t(null,void 0,r(913534)),3:()=>s.t(null,void 0,r(914530)),4:()=>s.t(null,void 0,r(903762))},h=(t,e)=>(e?t.getMonth():t.getUTCMonth())+1,l=(t,e)=>e?t.getDate():t.getUTCDate(),d=(t,e)=>e?t.getFullYear():t.getUTCFullYear(),u=(t,e)=>t.toLocaleDateString(window.language?(0,i.getIsoLanguageCodeFromLanguage)(window.language):void 0,{weekday:"short",timeZone:"local"===e?void 0:e}),c=(t,e)=>o[((t,e)=>Math.floor((h(t,e)-1)/3)+1)(t,e)](),m=(t,e)=>(0,n.numberToStringWithLeadingZero)(l(t,e),2),_=(t,e)=>a[h(t,e)](),f=(t,e)=>(0,n.numberToStringWithLeadingZero)(h(t,e),2),p=(t,e)=>(0,n.numberToStringWithLeadingZero)(d(t,e)%100,2),y=(t,e)=>(0,n.numberToStringWithLeadingZero)(d(t,e),4),g={"qq 'yy":(t,e)=>`${c(t,e)} '${p(t,e)}`,"qq yyyy":(t,e)=>`${c(t,e)} ${y(t,e)}`,"dd MMM 'yy":(t,e)=>`${m(t,e)} ${_(t,e)} '${p(t,e)}`,"MMM 'yy":(t,e)=>`${_(t,e)} '${p(t,e)}`,"MMM dd, yyyy":(t,e)=>`${_(t,e)} ${m(t,e)}, ${y(t,e)}`,"MMM d, yyyy":(t,e)=>`${_(t,e)} ${((t,e)=>(0,n.numberToStringWithLeadingZero)(l(t,e),0))(t,e)}, ${y(t,e)}`,"MMM yyyy":(t,e)=>`${_(t,e)} ${y(t,e)}`,"MMM dd":(t,e)=>`${_(t,e)} ${m(t,e)}`,"dd MMM":(t,e)=>`${m(t,e)} ${_(t,e)}`,"yyyy-MM-dd":(t,e)=>`${y(t,e)}-${f(t,e)}-${m(t,e)}`,"yy-MM-dd":(t,e)=>`${p(t,e)}-${f(t,e)}-${m(t,e)}`,"yy/MM/dd":(t,e)=>`${p(t,e)}/${f(t,e)}/${m(t,e)}`,"yyyy/MM/dd":(t,e)=>`${y(t,e)}/${f(t,e)}/${m(t,e)}`,"dd-MM-yyyy":(t,e)=>`${m(t,e)}-${f(t,e)}-${y(t,e)}`,"dd-MM-yy":(t,e)=>`${m(t,e)}-${f(t,e)}-${p(t,e)}`,"dd/MM/yy":(t,e)=>`${m(t,e)}/${f(t,e)}/${p(t,e)}`,"dd/MM/yyyy":(t,e)=>`${m(t,e)}/${f(t,e)}/${y(t,e)}`,"MM/dd/yy":(t,e)=>`${f(t,e)}/${m(t,e)}/${p(t,e)}`,"MM/dd/yyyy":(t,e)=>`${f(t,e)}/${m(t,e)}/${y(t,e)}`};function v(t,e){return"ja"===window.language?(r,s)=>`${g[t](r,s)} (${u(r,e)})`:(r,s)=>`${u(r,e)} ${g[t](r,s)}`}const b=Object.keys(g),w=()=>-1!==["ja","ko","zh","zh_TW"].indexOf(window.language||"")?"yyyy-MM-dd":"dd MMM 'yy"},784807:(t,e,r)=>{"use strict";r.d(e,{DateFormatter:()=>n});var s=r(303677),i=r(514181);class n{constructor(t="yyyy-MM-dd",e=!1,r="UTC"){this._dateFormatFunc=e?(0,i.getDateFormatWithWeekday)(t,r):i.dateFormatFunctions[t]}format(t){return s.customFormatters&&s.customFormatters.dateFormatter?s.customFormatters.dateFormatter.format(t):this._dateFormatFunc(t,!1)}formatLocal(t){return s.customFormatters.dateFormatter?s.customFormatters.dateFormatter.formatLocal?s.customFormatters.dateFormatter.formatLocal(t):s.customFormatters.dateFormatter.format(t):this._dateFormatFunc(t,!0)}parse(t){if(""===t)return{res:!1};let e=t;return s.customFormatters&&s.customFormatters.dateFormatter&&!s.customFormatters.dateFormatter.parse&&console.warn("You need to provide a `parse` function as part of `dateFormatter`"),s.customFormatters&&s.customFormatters.dateFormatter&&s.customFormatters.dateFormatter.parse&&(e=String(s.customFormatters.dateFormatter.parse(t))),{res:!0,value:e}}}},203186:(t,e,r)=>{
"use strict";r.d(e,{DateTimeFormatter:()=>a});var s=r(508450),i=r(784807);const n={dateFormat:"yyyy-MM-dd",withWeekday:!1,timeFormat:s.hourMinuteSecondFormat,dateTimeSeparator:" "};class a{constructor(t={}){const e=Object.assign({},n,t);this._dateFormatter=new i.DateFormatter(e.dateFormat,e.withWeekday,e.timezone),this._timeFormatter=new s.TimeFormatter(e.timeFormat),this._separator=e.dateTimeSeparator}format(t,e){const r=e?.dateTimeSeparator??this._separator;return`${this._dateFormatter.format(t)}${r}${this._timeFormatter.format(t)}`}formatLocal(t,e){const r=e?.dateTimeSeparator??this._separator;return`${this._dateFormatter.formatLocal(t)}${r}${this._timeFormatter.formatLocal(t)}`}}},188615:(t,e,r)=>{"use strict";r.d(e,{hourMinuteFormat:()=>a,hourMinuteNonZeroSecondFormat:()=>i,hourMinuteSecondFormat:()=>s,hourMinuteSecondMillisecFormat:()=>n,twelveHourMinuteFormat:()=>l,twelveHourMinuteNonZeroSecondFormat:()=>h,twelveHourMinuteSecondFormat:()=>o});const s="%h:%m:%s",i="%h:%m:%s+",n="%h:%m:%s.%ss+",a="%h:%m",o="%h:%m:%s %ampm",h="%h:%m:%s+ %ampm",l="%h:%m %ampm"},508450:(t,e,r)=>{"use strict";r.d(e,{TimeFormatter:()=>a,hourMinuteFormat:()=>n.hourMinuteFormat,hourMinuteNonZeroSecondFormat:()=>n.hourMinuteNonZeroSecondFormat,hourMinuteSecondFormat:()=>n.hourMinuteSecondFormat,hourMinuteSecondMillisecFormat:()=>n.hourMinuteSecondMillisecFormat,twelveHourMinuteFormat:()=>n.twelveHourMinuteFormat,twelveHourMinuteNonZeroSecondFormat:()=>n.twelveHourMinuteNonZeroSecondFormat,twelveHourMinuteSecondFormat:()=>n.twelveHourMinuteSecondFormat});var s=r(303677),i=r(866893),n=r(188615);class a{constructor(t){this._isTwelveHoursFormat=!1,this._valuesAndDelimeters=[];const e=t||n.hourMinuteSecondFormat,r=new RegExp("%h|%m|%s\\+|%ss\\+|%ss|%ampm|%s","g");let s=r.exec(e),i=0;for(;null!==s;){const t=s[0];"%ampm"===t&&(this._isTwelveHoursFormat=!0);const n=e.substring(i,s.index);""!==n&&this._valuesAndDelimeters.push(n),this._valuesAndDelimeters.push(t),i=s.index+t.length,s=r.exec(e)}}format(t){return s.customFormatters.timeFormatter?s.customFormatters.timeFormatter.format(t):this._formatTime(t,!1)}formatLocal(t){return s.customFormatters.timeFormatter?s.customFormatters.timeFormatter.formatLocal?s.customFormatters.timeFormatter.formatLocal(t):s.customFormatters.timeFormatter.format(t):this._formatTime(t,!0)}_formatTime(t,e){let r=e?t.getHours():t.getUTCHours();const s=e?t.getMinutes():t.getUTCMinutes(),n=e?t.getSeconds():t.getUTCSeconds(),a=e?t.getMilliseconds():t.getUTCMilliseconds();let o="";this._isTwelveHoursFormat&&(o=r>=12?"PM":"AM",r%=12,r=r||12);let h="",l=!1;for(let t=this._valuesAndDelimeters.length-1;t>=0;t--){const e=this._valuesAndDelimeters[t];let d;switch(e){case"%h":d=(0,i.numberToStringWithLeadingZero)(r,2);break;case"%m":d=(0,i.numberToStringWithLeadingZero)(s,2);break;case"%s+":0!==n?d=(0,i.numberToStringWithLeadingZero)(n,2):(d="",l=!0);break;case"%s":d=(0,i.numberToStringWithLeadingZero)(n,2);break;case"%ss":d=(0,i.numberToStringWithLeadingZero)(a,3);break;case"%ss+":0!==a?d=(0,
i.numberToStringWithLeadingZero)(a,3):(d="",l=!0);break;case"%ampm":d=o;break;default:if(l){l=!1;continue}d=e}h=d+h}return h}}},840810:(t,e,r)=>{"use strict";r.d(e,{isTicksEnabled:()=>i});var s=r(638456);r(687037);function i(){return!(0,s.onWidget)()}},847977:(t,e,r)=>{"use strict";var s;r.d(e,{SymbolErrorPermissionDeniedReason:()=>s,invalidSymbol:()=>n,permissionDenied:()=>i}),function(t){t.Symbol="symbol",t.GroupPermission="group"}(s||(s={}));const i="permission denied",n="invalid symbol"},957606:(t,e,r)=>{"use strict";r.d(e,{PlotList:()=>c,mergeMinMax:()=>m});var s=r(650151),i=r(615790),n=r(318545),a=r(735566),o=r(498374);const h=(0,a.getLogger)("Chart.PlotList"),l=30;function d(t){return t.index}function u(t){return t.value[0]}class c{constructor(t=null,e=null){this._items=[],this._start=0,this._end=0,this._shareRead=!1,this._minMaxCache=new Map,this._rowSearchCacheByIndex=new Map,this._rowSearchCacheByIndexWithoutEmptyValues=new Map,this._rowSearchCacheByTime=new Map,this._rowSearchCacheByTimeWithoutEmptyValues=new Map,this._plotFunctions=t||new Map,this._emptyValuePredicate=e}clear(){this._items=[],this._start=0,this._end=0,this._shareRead=!1,this._minMaxCache.clear(),this._invalidateSearchCaches()}first(){return this.size()>0?this._items[this._start]:null}last(){return this.size()>0?this._items[this._end-1]:null}firstIndex(){return this.size()>0?this._indexAt(this._start):null}firstPlottableIndex(){if(this.isEmpty())return null;for(let t=this._start;t<this._end;++t){const e=this._indexAt(t);if(e>n.UNPLOTTABLE_TIME_POINT_INDEX)return e}return null}lastIndex(){return this.size()>0?this._indexAt(this._end-1):null}clone(){const t=this.firstIndex(),e=this.lastIndex();return null===t||null===e?new c:this.range(t,e)}size(){return this._end-this._start}isEmpty(){return 0===this.size()}contains(t){return null!==this.search(t,o.PlotRowSearchMode.Exact)}valueAt(t){const e=this.search(t);return null!==e?e.value:null}add(t,e){if(this._shareRead)return h.logDebug("add: readonly collection modification attempt"),!1;const r={index:t,value:e},s=this._nonCachedSearch(t,o.PlotRowSearchMode.Exact,d);return this._invalidateSearchCaches(),null===s?(this._items.splice(this._lowerbound(t,d),0,r),this._start=0,this._end=this._items.length,!0):(this._items[s]=r,!1)}search(t,e=o.PlotRowSearchMode.Exact,r){return this._searchImpl(t,e,this._rowSearchCacheByIndex,this._rowSearchCacheByIndexWithoutEmptyValues,d,r)}searchByTime(t,e=o.PlotRowSearchMode.Exact,r){return this._searchImpl(t,e,this._rowSearchCacheByTime,this._rowSearchCacheByTimeWithoutEmptyValues,u,r)}fold(t,e){let r=e;for(let e=this._start;e<this._end;++e){r=t(this._indexAt(e),this._valueAt(e),r)}return r}findFirst(t,e){const r=void 0!==e&&Math.min(this._start+e,this._end)||this._end;for(let e=this._start;e<r;++e){const r=this._indexAt(e),s=this._valueAt(e);if(t(r,s))return{index:r,value:s}}return null}findLast(t,e){const r=void 0!==e&&Math.max(this._end-e,this._start)||this._start;for(let e=this._end-1;e>=r;--e){const r=this._indexAt(e),s=this._valueAt(e);if(t(r,s))return{
index:r,value:s}}return null}each(t){for(let e=this._start;e<this._end;++e){if(t(this._indexAt(e),this._valueAt(e)))break}}reduce(t,e){let r=e;for(let e=this._start;e<this._end;++e){r=t(r,this._indexAt(e),this._valueAt(e))}return r}range(t,e){const r=new c(this._plotFunctions,this._emptyValuePredicate);return r._items=this._items,r._start=this._lowerbound(t,d),r._end=this._upperbound(e),r._shareRead=!0,r}plottableRange(t){const e=new c(this._plotFunctions,this._emptyValuePredicate);return e._items=this._items,e._start=this._upperbound(n.UNPLOTTABLE_TIME_POINT_INDEX),e._end=this._end,e._shareRead=!0,!0===t&&e._start>this._start&&(e._start-=1),e}rangeCountback(t,e){if(null===this.firstIndex())return new c;const r=new c(this._plotFunctions,this._emptyValuePredicate);return r._items=this._items,r._end=this._upperbound(t),r._start=Math.max(this._start,r._end-e),r._shareRead=!0,r}rangeIterator(t,e){const r=this._lowerbound(t,d),s=this._upperbound(e);return this._rangeIteratorImpl(r,s)}fullRangeIterator(){return this._rangeIteratorImpl(this._start,this._end)}minMaxOnRangeCached(t,e,r){if(this.isEmpty())return null;let s=null;for(const i of r){s=m(s,this._minMaxOnRangeCachedImpl(t-i.offset,e-i.offset,i.name))}return s}minMaxOnRange(t,e,r){if(this.isEmpty())return null;let s=null;for(const i of r){s=m(s,this._minMaxOnRange(t-i.offset,e-i.offset,i.name))}return s}merge(t){return this._shareRead?(h.logDebug("merge: readonly collection modification attempt"),null):0===t.length?null:this.isEmpty()||t[t.length-1].index<this._items[0].index?this._prepend(t):t[0].index>this._items[this._items.length-1].index?this._append(t):1===t.length&&t[0].index===this._items[this._items.length-1].index?(this._updateLast(t[0]),t[0]):this._merge(t)}addTail(t,e=!1){if(0===t.length)return;let r=0;e&&this._end-this._start>0&&(r=1,this._items[this._end-this._start-1].value=t[0].value);for(let e=r;e<t.length;++e){const r=t[e],s=this.lastIndex();if(null===s){h.logError("Can't add tail to the empty plotlist");break}this.add(s+1,r.value)}this._invalidateSearchCaches()}move(t){if(this._shareRead)return void h.logDebug("move: readonly collection modification attempt");if(0===t.length)return;const e=this._items.slice();for(const r of t){const t=this._bsearch(r.old,d);if(null!==t&&void 0!==e[t])if(r.new===n.INVALID_TIME_POINT_INDEX)e[t]=void 0;else{e[t]={index:r.new,value:e[t].value};const s=this._bsearch(r.new,d);if(null!==s){const t=e[s];void 0!==t&&t.index===r.new&&(e[s]=void 0)}}}this._items=e.filter((t=>void 0!==t)).sort(((t,e)=>t.index-e.index)),this._invalidateSearchCaches(),this._minMaxCache.clear(),this._start=0,this._end=this._items.length}remove(t){if(this._shareRead)return h.logDebug("remove: readonly collection modification attempt"),null;const e=this._nonCachedSearch(t,o.PlotRowSearchMode.NearestRight,d);if(null===e)return null;const r=this._items.splice(e);return this._end=this._items.length,this._minMaxCache.clear(),this._invalidateSearchCaches(),r.length>0?r[0]:null}state(){const t=this._items.slice(this._start,this._end);return{start:0,
end:t.length,data:t}}restoreState(t){t?(this._start=t.start,this._end=t.end,this._shareRead=!1,this._items=t.data,this._minMaxCache.clear(),this._invalidateSearchCaches()):this.clear()}_indexAt(t){return this._items[t].index}_valueAt(t){return this._items[t].value}_length(){return this._items.length}_searchImpl(t,e,r,s,i,n){const a=void 0!==n?r:s,o=void 0!==n?1e4*(e+1)+n:e;let h=a.get(t);if(void 0!==h){const t=h.get(o);if(void 0!==t)return t}const l=this._nonCachedSearch(t,e,i,n);if(null===l)return null;const d={index:this._indexAt(l),value:this._valueAt(l)};return void 0===h&&(h=new Map,a.set(t,h)),h.set(o,d),d}_nonCachedSearch(t,e,r,s){const i=this._lowerbound(t,r),n=i===this._end||t!==r(this._items[i]);if(n&&e!==o.PlotRowSearchMode.Exact)switch(e){case o.PlotRowSearchMode.NearestLeft:return this._searchNearestLeft(i,s);case o.PlotRowSearchMode.NearestRight:return this._searchNearestRight(i,s);default:throw new TypeError("Unknown search mode")}if(void 0===s||n||e===o.PlotRowSearchMode.Exact)return n?null:i;switch(e){case o.PlotRowSearchMode.NearestLeft:return this._nonEmptyNearestLeft(i,s);case o.PlotRowSearchMode.NearestRight:return this._nonEmptyNearestRight(i,s);default:throw new TypeError("Unknown search mode")}}_nonEmptyNearestRight(t,e){const r=(0,s.ensure)(this._emptyValuePredicate),i=(0,s.ensure)(e);for(;t<this._end&&r(this._valueAt(t),i);)t+=1;return t===this._end?null:t}_nonEmptyNearestLeft(t,e){const r=(0,s.ensureNotNull)(this._emptyValuePredicate),i=(0,s.ensure)(e);for(;t>=this._start&&r(this._valueAt(t),i);)t-=1;return t<this._start?null:t}_searchNearestLeft(t,e){if(t===this._start)return null;const r=t-1,s=r!==this._end?r:null;return void 0!==e&&null!==s?this._nonEmptyNearestLeft(s,e):s}_searchNearestRight(t,e){const r=t,s=r!==this._end?r:null;return void 0!==e&&null!==s?this._nonEmptyNearestRight(s,e):s}_bsearch(t,e){const r=this._lowerbound(t,e);return r!==this._end&&t===e(this._items[r])?r:null}_lowerbound(t,e){return(0,i.lowerbound)(this._items,t,((t,r)=>e(t)<r),this._start,this._end)}_upperbound(t){return(0,i.upperbound)(this._items,t,((t,e)=>e.index>t),this._start,this._end)}_plotMinMax(t,e,r){let s=null;const i=this._plotFunctions.get(r);if(void 0===i)throw new Error(`Plot "${r}" is not registered`);for(let r=t;r<e;r++){const t=i(this._items[r].value);null==t||Number.isNaN(t)||(null===s?s={min:t,max:t}:(t<s.min&&(s.min=t),t>s.max&&(s.max=t)))}return s}_invalidateCacheForRow(t){const e=Math.floor(t.index/l);this._minMaxCache.forEach((t=>t.delete(e)))}_prepend(t){return(0,s.assert)(!this._shareRead,"collection should not be readonly"),(0,s.assert)(0!==t.length,"plotRows should not be empty"),this._invalidateSearchCaches(),this._minMaxCache.clear(),this._items=t.concat(this._items),this._start=0,this._end=this._items.length,t[0]}_append(t){return(0,s.assert)(!this._shareRead,"collection should not be readonly"),(0,s.assert)(0!==t.length,"plotRows should not be empty"),this._invalidateSearchCaches(),this._minMaxCache.clear(),this._items=this._items.concat(t),this._start=0,
this._end=this._items.length,t[0]}_updateLast(t){(0,s.assert)(!this.isEmpty(),"plot list should not be empty");const e=this._items[this._end-1];(0,s.assert)(e.index===t.index,"last row index should match new row index"),this._invalidateCacheForRow(t),this._invalidateSearchCaches(),this._items[this._end-1]=t}_merge(t){return(0,s.assert)(0!==t.length,"plot rows should not be empty"),this._invalidateSearchCaches(),this._minMaxCache.clear(),this._items=function(t,e){const r=function(t,e){const r=t.length,s=e.length;let i=r+s,n=0,a=0;for(;n<r&&a<s;)t[n].index<e[a].index?n++:t[n].index>e[a].index?a++:(n++,a++,i--);return i}(t,e),s=new Array(r);let i=0,n=0;const a=t.length,o=e.length;let h=0;for(;i<a&&n<o;)t[i].index<e[n].index?(s[h]=t[i],i++):t[i].index>e[n].index?(s[h]=e[n],n++):(s[h]=e[n],i++,n++),h++;for(;i<a;)s[h]=t[i],i++,h++;for(;n<o;)s[h]=e[n],n++,h++;return s}(this._items,t),this._start=0,this._end=this._items.length,t[0]}_minMaxOnRangeCachedImpl(t,e,r){if(this.isEmpty())return null;let i=null;const n=(0,s.ensureNotNull)(this.firstIndex()),a=(0,s.ensureNotNull)(this.lastIndex()),o=Math.max(t,n),h=Math.min(e,a),d=Math.ceil(o/l)*l,u=Math.max(d,Math.floor(h/l)*l);i=m(i,this._minMaxOnRange(o,Math.min(d,e,h),r));let c=this._minMaxCache.get(r);void 0===c&&(c=new Map,this._minMaxCache.set(r,c));for(let t=Math.max(d+1,o);t<u;t+=l){const e=Math.floor(t/l);let s=c.get(e);if(void 0===s){const t=e*l,i=(e+1)*l-1;s=this._minMaxOnRange(t,i,r),c.set(e,s)}i=m(i,s)}i=m(i,this._minMaxOnRange(u,h,r));return i}_minMaxOnRange(t,e,r){return this._plotMinMax(this._lowerbound(t,d),this._upperbound(e),r)}_rangeIteratorImpl(t,e){let r=t-1;return{[Symbol.iterator](){return this},next:()=>(r+=1,r>=e?{done:!0,value:void 0}:{done:!1,value:this._items[r]})}}_invalidateSearchCaches(){this._rowSearchCacheByIndex.clear(),this._rowSearchCacheByIndexWithoutEmptyValues.clear(),this._rowSearchCacheByTime.clear(),this._rowSearchCacheByTimeWithoutEmptyValues.clear()}}function m(t,e){if(null===t)return e;if(null===e)return t;return{min:Math.min(t.min,e.min),max:Math.max(t.max,e.max)}}},673378:(t,e,r)=>{"use strict";r.d(e,{createPrimitiveProperty:()=>i});var s=r(751610);function i(t){return new s.Property(t)}},57408:(t,e,r)=>{"use strict";r.d(e,{PropertyBase:()=>n});var s=r(650151),i=r(251924);class n{constructor(){this._listeners=new i.Delegate,this._muteChildChanges=!1,this._owner=null,this._name=""}nameInOwner(){return this._name}setNameInOwner(t){this._name=t}owner(){return this._owner}setOwner(t){this._owner=t}pathToRoot(){const t=this._owner?.pathToRoot();return t?`${t}.${this._name}`:this._name}pathToRootProperty(){if(!this._owner)return"";const t=this._owner.pathToRootProperty?.();return t?`${t}.${this._name}`:this._name}removeProperty(t){(0,s.assert)(!1,`Trying to call "removeProperty" on property ${this.pathToRoot()}`)}addChild(t,e){(0,s.assert)(!1,`Trying to call "addChild" on property ${this.pathToRoot()}`)}hasChild(t){return!1}childCount(){return 0}childNames(){return[]}childs(){(0,
s.assert)(!1,`Trying to call "childs" on property ${this.pathToRoot()}`)}state(t,e){return this.value()}merge(t,e){(0,s.assert)(!1,`Trying to call "merge" on property ${this.pathToRoot()}`)}mergeAndFire(t){(0,s.assert)(!1,`Trying to call "mergeAndFire" on property ${this.pathToRoot()}`)}child(t){if(this.hasChild(t))return this.childs()[t]}muteChildChanges(t){this._muteChildChanges=t}fireChanged(){this._listeners.fire(this,this.pathToRootProperty())}listeners(){return this._listeners}subscribe(t,e){this.listeners().subscribe(t,e,!1)}unsubscribe(t,e){this.listeners().unsubscribe(t,e)}unsubscribeAll(t){this.listeners().unsubscribeAll(t)}}},113640:(t,e,r)=>{"use strict";r.d(e,{DataTypes:()=>s,createPropertySchema:()=>f,dataType:()=>u,extractStateWithSchema:()=>p,isArraySchema:()=>_,validateSchema:()=>m});var s,i=r(569708),n=r(283873),a=r(683350),o=r(456052),h=r(182433),l=r(936714),d=r(650151);function u(t){return(0,i.default)(t)?s.NUMBER:(0,n.default)(t)?s.STRING:(0,a.default)(t)?s.BOOLEAN:(0,o.default)(t)?s.ARRAY:null===t?s.NULL:"object"==typeof t?s.OBJECT:s.UNKNOWN}!function(t){t.STRING="string",t.NUMBER="number",t.BOOLEAN="boolean",t.OBJECT="object",t.ARRAY="array",t.NULL="null",t.UNKNOWN="unknown"}(s||(s={}));const c=[s.ARRAY,s.OBJECT];function m(t,e){try{const r=u(t);if((0,d.assert)(r===e.type||r===s.NULL&&e.nullable||e.type===s.UNKNOWN),c.includes(r))switch(e.type){case s.ARRAY:(0,d.assert)(t.every((t=>m(t,e.subschema))));break;case s.OBJECT:for(const[r,s]of Object.entries(e.subschema))(0,d.assert)(m(t[r],s))}return!0}catch{return!1}}function _(t){return t.type===s.ARRAY}function f(t,e){let r;const i=u(t);switch(i){case s.NUMBER:case s.STRING:case s.BOOLEAN:r={type:i,saveFlags:e};break;case s.ARRAY:r={type:s.ARRAY,saveFlags:e,subschema:f(t[0],e)};break;case s.OBJECT:{const i={};for(const[r,s]of Object.entries(t))i[r]=f(s,e);r={type:s.OBJECT,saveFlags:e,subschema:i};break}default:r={type:s.UNKNOWN,saveFlags:e}}return r}function p(t,e,r){if(!function(t){return t.type===s.OBJECT}(e)||!(0,h.default)(t))return t;const i=Object.keys(t);for(const s of i){const i=e.subschema[s];void 0===e.saveFlags||i||(0,l.default)(t,s);const n=i?.saveFlags;void 0===n||n&r||(0,l.default)(t,s),i&&p(t[s],i,r)}return t}},751610:(t,e,r)=>{"use strict";r.d(e,{Property:()=>f,isPrimitiveType:()=>_});var s=r(569708),i=r(283873),n=r(683350),a=r(688987),o=r(456052),h=r(650151),l=r(735566),d=r(483102),u=r(57408),c=r(113640);const m=(0,l.getLogger)("Property");function _(t){return null===t||(0,s.default)(t)&&Number.isFinite(t)||(0,i.default)(t)||(0,n.default)(t)}class f extends u.PropertyBase{constructor(t,e){if(super(),this._childs=[],this._dependents=[],this._schema=e||(0,c.createPropertySchema)(t),void 0!==t)if((0,c.validateSchema)(t,this._schema)||m.logWarn(`The state with a data type: ${(0,c.dataType)(t)} does not match a schema`),_(t))this._value=t;else{let e=Object.entries(t);(0,c.isArraySchema)(this._schema)&&(e=e.filter((([t])=>!Number.isNaN(+t))));for(const[t,r]of e)this.addProperty(t,r)}}destroy(){this.listeners().destroy()
;for(const t of this._childs)this.child(t)?.destroy?.()}merge(t,e){let r=null,s=0;if(e&&(r=[],s=r.length),void 0===t)return r;if(_(t))return this._value!==t&&r?.push(this),this._value=t,r;if((0,o.default)(t)){(0,c.isArraySchema)(this._schema)||m.logWarn("Property is not an array");for(let s=0;s<t.length;s++){const i=this.childs()[s];if(i){const n=i.merge(t[s],e);r?.push(...n)}else{const e=this.addProperty(`${s}`,t[s]);r?.push(e)}}}else{let s=Object.entries(t);(0,c.isArraySchema)(this._schema)&&(s=s.filter((([t])=>!Number.isNaN(+t))));for(const[t,i]of s){const s=this.childs()[t];if(s){const t=s.merge(i,e);r?.push(...t)}else{const e=this.addProperty(t,i);r?.push(e)}}}return r&&r.length>s&&r.push(this),r}mergeAndFire(t){const e=(0,h.ensureNotNull)(this.merge(t,!0));this._fireMergeAndFireChangedProps(e)}state(t,e){const r=(0,a.default)(this.value)?this.value():void 0;if(void 0!==r)return r;const s=(0,c.isArraySchema)(this._schema)?[]:{};for(const r of this._childs){if(t&&-1!==t.indexOf(r))continue;if((0,c.isArraySchema)(this._schema)&&Number.isNaN(+r))continue;if(void 0!==e&&"subschema"in this._schema){const t=(0,c.isArraySchema)(this._schema)?this._schema.subschema:this._schema.subschema[r];if(void 0!==this._schema.saveFlags&&!t)continue;if(void 0!==t?.saveFlags&&!(t.saveFlags&e))continue}const i=this.childs()[r];let n;if(t){const s=[];for(const e of t)e.startsWith(r+".")&&s.push(e.substring(r.length+1));n=i?.state(s,e)}else n=i?.state();(void 0!==n||i?.storeStateIfUndefined())&&((0,o.default)(s)?s[+r]=n:s[r]=n)}return s}clone(){return new f(this.state())}value(){return this._value}childCount(){return this._childs.length}childNames(){return this._childs}childByPath(t){let e=this;for(const r of t.split(".")){if(void 0===e)break;e=e.child(r)}return e}hasChild(t){return this._childs.includes(t)}setValue(t,e){(this._value!==t||e)&&(this._value=t,this.fireChanged())}setValueSilently(t){this._value=t}addProperty(t,e){let r;(0,c.isArraySchema)(this._schema)&&Number.isNaN(+t)&&m.logWarn("Property is an array"),this.removeProperty(t),this._schema.type===c.DataTypes.OBJECT?r=this._schema.subschema[t]:this._schema.type===c.DataTypes.ARRAY&&(r=this._schema.subschema);const s=new f(e,r);return this[t]=s,this._childs.push(t),s.subscribe(this,((t,e)=>{this._childChanged(t,e)})),s.setOwner(this),s.setNameInOwner(t),s}removeProperty(t){const e=this.child(t);e&&(e.setNameInOwner(""),e.setOwner(null),e.unsubscribeAll(this),delete this[t],this._childs=this._childs.filter((e=>e!==t)))}addChild(t,e){if((0,c.isArraySchema)(this._schema)&&Number.isNaN(+t))throw new Error("Property is an array");this[t]&&this.removeProperty(t),this[t]=e,-1===this._childs.indexOf(t)&&this._childs.push(t),e.subscribe(this,((t,e)=>this._childChanged(t,e))),e.setOwner(this),e.setNameInOwner(t)}childs(){return this}storeStateIfUndefined(){return!0}ownership(){return(0,d.ownership)(this)}weakReference(){return(0,d.weakReference)(this)}addDependent(t){this._dependents.push(t)}removeDependent(t){const e=this._dependents.indexOf(t);e>=0&&this._dependents.splice(e,1)}
dependents(){return this._dependents}_childChanged(t,e){this._muteChildChanges||this._listeners.fire(this,e)}_fireMergeAndFireChangedProps(t){this.muteChildChanges(!0);for(const e of t)e.muteChildChanges(!0);for(const e of t)e.muteChildChanges(!1),e.fireChanged();this.muteChildChanges(!1)}}},888365:(t,e,r)=>{"use strict";r.d(e,{SeriesData:()=>c,barFunction:()=>d,barFunctions:()=>h,seriesPlotFunctionMap:()=>l});var s,i=r(650151),n=r(957606),a=r(87522);!function(t){t[t.FromLeft=-1]="FromLeft",t[t.FromRight=1]="FromRight"}(s||(s={}));const o=["open","high","low","close","hl2","hlc3","ohlc4"],h={open:t=>t[1],high:t=>t[2],low:t=>t[3],close:t=>t[4],hl2:t=>(t[2]+t[3])/2,hlc3:t=>(t[2]+t[3]+t[4])/3,ohlc4:t=>(t[1]+t[2]+t[3]+t[4])/4};function l(){const t=new Map;return o.forEach(((e,r)=>{t.set(e,d(e))})),t}function d(t,e,r){const s=h[e??t],i=h[t],n=h[r??t];return(t,e)=>{switch(e){case 0:return s(t);case 2:return n(t);default:return i(t)}}}function u(t,e){return null==t[e]}class c{constructor(){this.m_bars=new n.PlotList(l(),u),this.m_nsBars=new n.PlotList(l(),u),this._conflatedChunksBuilder=new a.ConflatedChunksBuilder(this.m_bars,(t=>h[t]))}bars(){return this.m_bars}nsBars(){return this.m_nsBars}conflatedChunks(t,e){return this._conflatedChunksBuilder.conflatedChunks(t,e)}mergeRegularBars(t){return this._conflatedChunksBuilder.mergeData(t)}size(){return this.m_bars.size()+this.m_nsBars.size()}each(t){this.m_bars.each(t),this.m_nsBars.each(t)}clear(){this.m_nsBars.clear(),this.lastProjectionPrice=void 0,this._conflatedChunksBuilder.clearData()}clone(){const t=new c;return t.lastProjectionPrice=this.lastProjectionPrice,t.boxSize=this.boxSize,t.reversalAmount=this.reversalAmount,t.m_bars=this.m_bars.clone(),t.m_nsBars=this.m_bars.clone(),t}isEmpty(){return this.m_bars.isEmpty()&&this.m_nsBars.isEmpty()}first(){return this.m_bars.isEmpty()?this.m_nsBars.first():this.m_bars.first()}last(){return this.m_nsBars.isEmpty()?this.m_bars.last():this.m_nsBars.last()}search(t,e,r){return this.nsBars().isEmpty()?this.bars().search(t,e,r):this.bars().isEmpty()||(0,i.ensureNotNull)(this.nsBars().firstIndex())<=t?this.nsBars().search(t,e,r):this.bars().search(t,e,r)}valueAt(t){const e=this.search(t);return null!==e?e.value:null}plotValueToTimePointIndex(t,e,r){if(r===s.FromRight){const r=(r,s)=>{const i=s[e];return null!=i&&t>=i},s=this.m_bars.findLast(r);if(null!==s)return s.index;const i=this.m_nsBars.findLast(r);return null!==i?i.index:this.m_bars.firstIndex()}if(r===s.FromLeft){const r=(r,s)=>{const i=s[e];return null!=i&&t<=i},s=this.m_bars.findFirst(r);if(null!==s)return s.index;const i=this.m_nsBars.findFirst(r);return null!==i?i.index:this.m_bars.lastIndex()}throw new Error("plotValueToTimePointIndex: unsupported search mode")}moveData(t){this._conflatedChunksBuilder.moveData(t),this.m_nsBars.move(t)}}},670229:(t,e,r)=>{"use strict";r.d(e,{SeriesDataEvents:()=>i});var s=r(251924);class i{constructor(){this._created=new s.Delegate,this._modified=new s.Delegate,this._cleared=new s.Delegate,this._loading=new s.Delegate,
this._completed=new s.Delegate,this._error=new s.Delegate,this._symbolError=new s.Delegate,this._symbolResolved=new s.Delegate,this._seriesError=new s.Delegate,this._symbolNotPermitted=new s.Delegate,this._symbolInvalid=new s.Delegate,this._symbolGroupNotPermitted=new s.Delegate,this._chartTypeNotPermitted=new s.Delegate,this._intradaySpreadNotPermitted=new s.Delegate,this._intradayExchangeNotPermitted=new s.Delegate,this._customIntervalNotPermitted=new s.Delegate,this._secondsIntervalNotPermitted=new s.Delegate,this._ticksIntervalNotPermitted=new s.Delegate,this._barReceived=new s.Delegate,this._seriesTimeFrame=new s.Delegate,this._dataUpdated=new s.Delegate,this._unsupportedResolutionRequested=new s.Delegate}destroy(){this._created.destroy(),this._modified.destroy(),this._loading.destroy(),this._completed.destroy(),this._error.destroy(),this._symbolError.destroy(),this._symbolResolved.destroy(),this._seriesError.destroy(),this._symbolInvalid.destroy(),this._symbolNotPermitted.destroy(),this._symbolGroupNotPermitted.destroy(),this._chartTypeNotPermitted.destroy(),this._intradaySpreadNotPermitted.destroy(),this._intradayExchangeNotPermitted.destroy(),this._customIntervalNotPermitted.destroy(),this._secondsIntervalNotPermitted.destroy(),this._ticksIntervalNotPermitted.destroy(),this._barReceived.destroy(),this._seriesTimeFrame.destroy(),this._dataUpdated.destroy(),this._unsupportedResolutionRequested.destroy()}created(){return this._created}modified(){return this._modified}cleared(){return this._cleared}loading(){return this._loading}completed(){return this._completed}error(){return this._error}symbolError(){return this._symbolError}symbolResolved(){return this._symbolResolved}seriesError(){return this._seriesError}symbolInvalid(){return this._symbolInvalid}symbolNotPermitted(){return this._symbolNotPermitted}symbolGroupNotPermitted(){return this._symbolGroupNotPermitted}chartTypeNotPermitted(){return this._chartTypeNotPermitted}intradaySpreadNotPermitted(){return this._intradaySpreadNotPermitted}intradayExchangeNotPermitted(){return this._intradayExchangeNotPermitted}customIntervalNotPermitted(){return this._customIntervalNotPermitted}secondsIntervalNotPermitted(){return this._secondsIntervalNotPermitted}ticksIntervalNotPermitted(){return this._ticksIntervalNotPermitted}barReceived(){return this._barReceived}seriesTimeFrame(){return this._seriesTimeFrame}dataUpdated(){return this._dataUpdated}unsupportedResolutionRequested(){return this._unsupportedResolutionRequested}fireCompleted(t){this._completed.fire(t)}fireCreated(t){this._created.fire(t)}fireModified(){this._modified.fire()}fireCleared(){this._cleared.fire()}fireLoading(t){this._loading.fire(t)}fireError(){this._error.fire()}fireSymbolError(t){this._symbolError.fire(t),this.fireError()}fireSymbolResolved(t){this._symbolResolved.fire(t)}fireSeriesError(t){this._seriesError.fire(t),this.fireError()}fireSymbolInvalid(){this._symbolInvalid.fire()}fireSymbolNotPermitted(t){this._symbolNotPermitted.fire(t)}fireSymbolGroupNotPermitted(t){
this._symbolGroupNotPermitted.fire(t)}fireChartTypeNotPermitted(t){this._chartTypeNotPermitted.fire(t),this.fireError()}fireIntradaySpreadNotPermitted(){this._intradaySpreadNotPermitted.fire(),this.fireError()}fireIntradayExchangeNotPermitted(){this._intradayExchangeNotPermitted.fire(),this.fireError()}fireCustomIntervalNotPermitted(t){this._customIntervalNotPermitted.fire(t),this.fireError()}fireSecondsIntervalNotPermitted(){this._secondsIntervalNotPermitted.fire(),this.fireError()}fireTicksIntervalNotPermitted(){this._ticksIntervalNotPermitted.fire(),this.fireError()}fireBarReceived(t){this._barReceived.fire(t)}fireSeriesTimeFrame(t,e,r,s,i){this._seriesTimeFrame.fire(t,e,r,s,i)}fireDataUpdated(t,e,r,s,i){this._dataUpdated.fire(t,e,r,s,i)}fireUnsupportedResolutionRequested(){this._unsupportedResolutionRequested.fire()}}},999566:(t,e,r)=>{"use strict";r.d(e,{getHourMinuteFormat:()=>i,getHourMinuteSecondFormat:()=>n,getTimeFormatForInterval:()=>a});var s=r(508450);function i(t){return"12-hours"===t?s.twelveHourMinuteFormat:s.hourMinuteFormat}function n(t){return"12-hours"===t?s.twelveHourMinuteSecondFormat:s.hourMinuteSecondFormat}function a(t,e){if(t.isRange())return function(t){return"12-hours"===t?s.twelveHourMinuteNonZeroSecondFormat:s.hourMinuteNonZeroSecondFormat}(e);if(t.isTicks())return s.hourMinuteSecondMillisecFormat;return t.isSeconds()||t.isTicks()?n(e):i(e)}},197188:(t,e,r)=>{"use strict";function s(){let t,e;return{promise:new Promise(((r,s)=>{t=r,e=s})),reject:e,resolve:t}}r.d(e,{createDeferredPromise:()=>s})}}]);