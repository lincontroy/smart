"use strict";(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[13946],{38124:(t,e,i)=>{i.d(e,{drawSelection:()=>a,getSymbolCoordinatesInfo:()=>r});var n=i(680574),o=i(436465);function r(t){const{symbolPosition:e,textWidth:i,textByLines:r,lineHeight:a,font:s,textAlign:l,lineSpacing:h=0}=t;let[d,c]=function(t,e){let i=0;switch(t){case"center":i=e/2;break;case"start":i=(0,n.isRtl)()?e:0;break;case"end":i=(0,n.isRtl)()?0:e;break;case"right":i=e}return[i,0]}(l,i);const u=(0,n.isRtl)(),g=a+h;let x=0,f=0,_="";for(let t=0;t<r.length;t++){let n=e-x;const{wrappedLinePart:a,wrappedLineEnd:h,hidden:p,text:b}=r[t],w=t<r.length-1?r[t+1]:null;if(p||(_=b),w&&n>b.length){x+=b.length+(a&&!h?0:1),p||(c+=g);continue}p&&(c-=g);const P=a&&!h&&b.length===n&&w&&!w.hidden;if(p&&(_+="â€¯",n=_.length),"center"===l)if(P)d=i/2;else{const t=(0,o.measureText)(_,s).width,e=(0,o.measureText)(_.slice(0,n),s).width,r=i/2;d=u?r+t/2-e:r-t/2+e}else if("right"===l&&!u||"left"===l&&u||"end"===l)if(P)d=i;else{const t=(0,o.measureText)(_.slice(n),s).width;d=u?t:i-t}else if(P)d=0;else{const t=(0,o.measureText)(_.slice(0,n),s).width;d=u?i-t:t}P?(f=t+1,c+=g):f=t;break}return{x:d,y:c,lineNumber:f}}function a(t,e,i){const{lines:r,selectionStart:a,selectionEnd:l,left:h,right:d,color:c,font:u,lineHeight:g,lineSpacing:x=0}=i;t.save();const f=(h+d)/2,_=g+x,p=(0,n.isRtl)();t.fillStyle=c;const{horizontalPixelRatio:b,verticalPixelRatio:w}=e;if(a.lineNumber===l.lineNumber){const e=Math.round(a.x*b),i=Math.round(a.y*w),n=Math.round(l.x*b);t.fillRect(Math.min(e,n),i,Math.abs(e-n),Math.round(_*w))}else{const e=(0,o.measureText)(" ",u).width;let i=0;for(let n=a.lineNumber;n<=l.lineNumber;n+=1){const o=n===a.lineNumber,c=n===l.lineNumber,g=r[n];if(g.hidden)continue;const x=s(g.text,u);let P,T,y=!1;"center"===t.textAlign?(P=o?a.x:p?f+x/2:f-x/2,T=c?l.x:p?f-x/2:f+x/2):"right"===t.textAlign||p&&"start"===t.textAlign||!p&&"end"===t.textAlign?(P=o?a.x:d-x,T=c?l.x:d,y=!0):(P=o?a.x:h,T=c?l.x:h+x);let m=Math.min(P,T),S=Math.max(P,T);c||g.wrappedLinePart&&!g.wrappedLineEnd||(y?m-=e:S+=e);const H=Math.round(m*b),W=Math.round(S*b),R=Math.round((a.y+i*_)*w),A=Math.round((a.y+(i+1)*_)*w);t.fillRect(H,R,W-H,A-R),i+=1}}t.restore()}function s(t,e){return(0,o.measureText)(t,e).width}},743099:(t,e,i)=>{i.d(e,{CompositeRenderer:()=>n});class n{constructor(){this._renderers=[],this._globalAlpha=1}setGlobalAlpha(t){this._globalAlpha=t}append(t){t&&this._renderers.push(t)}insert(t,e){this._renderers.splice(e,0,t)}clear(){this._renderers.length=0}isEmpty(){return 0===this._renderers.length}draw(t,e){for(let i=0;i<this._renderers.length;i++)t.save(),t.globalAlpha=this._globalAlpha,this._renderers[i].draw(t,e),t.restore()}drawBackground(t,e){t.save(),t.globalAlpha=this._globalAlpha;for(let i=0;i<this._renderers.length;i++){const n=this._renderers[i];n.drawBackground&&n.drawBackground(t,e)}t.restore()}hitTest(t,e){let i=null;for(let n=this._renderers.length-1;n>=0;n--){const o=this._renderers[n].hitTest(t,e);null!==o&&(null===i||o.target()>i.target())&&(i=o)}return i}
doesIntersectWithBox(t,e){return this._renderers.some((i=>!!i.doesIntersectWithBox&&i.doesIntersectWithBox(t,e)))}}},973274:(t,e,i)=>{i.d(e,{MediaCoordinatesPaneRenderer:()=>o});var n=i(871934);class o{draw(t,e){new n.CanvasRenderingTarget2D(t,e.mediaSize,e.bitmapSize).useMediaCoordinateSpace((t=>this._drawImpl(t)))}drawBackground(t,e){new n.CanvasRenderingTarget2D(t,e.mediaSize,e.bitmapSize).useMediaCoordinateSpace((t=>this._drawBackgroundImpl(t)))}_drawBackgroundImpl(t){}}},265683:(t,e,i)=>{i.d(e,{TextRenderer:()=>R,calculateLabelPosition:()=>x,fontSize:()=>m,getTextAlignInBox:()=>W,getTextBoundaries:()=>f,lineSpacing:()=>y,needTextExclusionPath:()=>_});var n=i(610555),o=i(650151),r=i(906453),a=i(680574),s=i(594632),l=i(578679),h=i(850699),d=i(38124),c=i(436465),u=i(204181),g=i(729813);function x(t,e,i,o,r){const a=.5*(e.x+i.x);let s=i.y;return e.y>i.y?(s-=t.height/2+o.y,s=Math.max(t.height/2,s)):(s+=t.height/2+o.y,s=Math.min(r-t.height/2,s)),new n.Point(a,s)}function f(t,e,i){if(t.isOutOfScreen(e,i))return null;const n=t.getPolygonPoints();return 0===n.length?null:n}function _(t){const e=t.getLinesInfo().lines;if(e.length%2==0)return!1;if(""===e[Math.floor(e.length/2)].text.trim())return!1;return!0}function p(t,e,i){if(0===i)return t.clone();const o=(t.x-e.x)*Math.cos(i)-(t.y-e.y)*Math.sin(i)+e.x,r=(t.x-e.x)*Math.sin(i)+(t.y-e.y)*Math.cos(i)+e.y;return(0,n.point)(o,r)}function b(t){return void 0!==t.boxPaddingVert?t.boxPaddingVert*H(t):void 0!==t.boxPadding?t.boxPadding*H(t):m(t)/3}function w(t){return void 0!==t.boxPaddingHorz?t.boxPaddingHorz*H(t):void 0!==t.boxPadding?t.boxPadding*H(t):m(t)/3}function P(t){return void 0!==t.boxPaddingLeft?t.boxPaddingLeft*H(t):w(t)}function T(t){return void 0!==t.boxPaddingRight?t.boxPaddingRight*H(t):w(t)}function y(t){let e=t.lineSpacing;return void 0===e&&t.lineHeight&&(e=(t.lineHeight-1)*S(t)),(e??0)*H(t)}function m(t){return Math.ceil(S(t)*H(t))}function S(t){return t.fontsize||t.fontSize||30}function H(t){const e=Math.min(1,Math.max(.2,t.scale||1));if(1===e)return e;const i=S(t);return Math.ceil(e*i)/i}function W(t){const{horzAlign:e,extendLeft:i=!1,extendRight:o=!1,width:r,leftPoint:a,rightPoint:l}=t,h=(a.x<=r||i)&&(l.x>=0||o);let d,c,u=e;switch(u){case s.HorizontalAlign.Left:c=a.y,i?d=h?0:l.x:(d=a.x,u=s.HorizontalAlign.Right);break;case s.HorizontalAlign.Right:c=l.y,o?d=h?r:a.x:(d=l.x,u=s.HorizontalAlign.Left);break;default:d=((i&&h?0:a.x)+(o&&h?r:l.x))/2,c=(a.y+l.y)/2;break}return[(0,n.point)(d,c),u]}class R{constructor(t,e){this._data=null,this._textWidthCache=new u.TextWidthCache,this._internalData=null,this._boxSize=null,this._box=null,this._polygonPoints=null,this._linesInfo=null,this._fontInfo=null,this._centerTextRotationPoint=null,this._rotationPoint=null,this._wordWrap=(0,g.wordWrapCached)(),this._hitTest=e||new l.HitTestResult(l.HitTarget.MovePoint,{areaName:l.AreaName.Text}),void 0!==t&&this.setData(t)}setHitTest(t){this._hitTest=t}data(){return this._data}updateData(t){this.setData({...(0,o.ensureNotNull)(this._data),...t})}setData(t){null!==t?((0,
o.assert)(!t.decorator||void 0===t.wordWrapWidth,"Decorator is not supported with wordWrapWidth"),void 0===t.text&&(t.text=""),t.horzTextAlign||(t.horzTextAlign=t.horzAlign),!function(t,e){if(null===t||null===e)return null===t==(null===e);if(void 0===t.points!=(void 0===e.points))return!1;if(void 0!==t.points&&void 0!==e.points){if(t.points.length!==e.points.length)return!1;for(let o=0;o<t.points.length;++o)if(i=t.points[o],n=e.points[o],i.x!==n.x||i.y!==n.y)return!1}var i,n;return t.text===e.text&&t.decorator===e.decorator&&t.vertAlign===e.vertAlign&&t.horzAlign===e.horzAlign&&t.horzTextAlign===e.horzTextAlign&&t.font===e.font&&t.offsetX===e.offsetX&&t.offsetY===e.offsetY&&t.bold===e.bold&&t.italic===e.italic&&t.fontsize===e.fontsize&&t.fontSize===e.fontSize&&t.backgroundRoundRect===e.backgroundRoundRect&&t.forceTextAlign===e.forceTextAlign&&t.wordWrapWidth===e.wordWrapWidth&&t.forceCalculateMaxLineWidth===e.forceCalculateMaxLineWidth&&t.lineHeight===e.lineHeight&&t.lineSpacing===e.lineSpacing&&t.scale===e.scale&&t.boxPadding===e.boxPadding&&t.boxPaddingVert===e.boxPaddingVert&&t.boxPaddingLeft===e.boxPaddingLeft&&t.boxPaddingRight===e.boxPaddingRight&&t.boxPaddingHorz===e.boxPaddingHorz&&t.angle===e.angle&&t.maxHeight===e.maxHeight&&t.outlineBorder?.width===e.outlineBorder?.width&&t.outlineBorder?.color===e.outlineBorder?.color}(this._data,t)?(this._data=t,this._internalData=null,this._boxSize=null,this._polygonPoints=null,this._centerTextRotationPoint=null,this._rotationPoint=null,this._linesInfo=null,this._fontInfo=null,this._box=null):this._data=t):this._data=null}hitTest(t){return null===this._data||void 0===this._data.points||0===this._data.points.length?null:(0,r.pointInPolygon)(t,this.getPolygonPoints())?this._hitTest:null}doesIntersectWithBox(t){return null!==this._data&&void 0!==this._data.points&&0!==this._data.points.length&&(0,r.pointInBox)(this._data.points[0],t)}measure(){if(null===this._data)return{boxWidth:0,boxHeight:0,width:0,height:0};const t=this._getBoxSize();return{boxWidth:t.boxWidth,boxHeight:t.boxHeight,width:t.textBoxWidth,height:t.textBoxHeight}}rect(){if(null===this._data)return{x:0,y:0,width:0,height:0};const{boxLeft:t,boxTop:e,boxWidth:i,boxHeight:n}=this._getBox();return{x:t,y:e,width:i,height:n}}isOutOfScreen(t,e){if(null===this._data||void 0===this._data.points||0===this._data.points.length)return!0;const{boxLeft:i,boxWidth:o}=this._getBox();if(i+o<0||i>t){const i=(0,n.box)((0,n.point)(0,0),(0,n.point)(t,e));return this.getPolygonPoints().every((t=>!(0,r.pointInBox)(t,i)))}return!1}setPoints(t,e){(0,o.ensureNotNull)(this._data).points=t,this._hitTest=e||new l.HitTestResult(l.HitTarget.MovePoint)}setPoint(t,e,i){const n=(0,o.ensureNotNull)(this._data);this.setData({...n,points:[t],offsetX:e??n.offsetX,offsetY:i??n.offsetY})}point(){return this._data?.points?.[0]??null}fontStyle(t){return null===this._data?"":this._getFontInfo().fontStyle}lineHeight(){return null===this._data?0:m(this._data)}lineSpacing(){return null===this._data?0:y(this._data)}draw(t,e){
if(null===this._data||void 0===this._data.points||0===this._data.points.length)return;const{mediaSize:i,horizontalPixelRatio:r,verticalPixelRatio:a}=e;if(this.isOutOfScreen(i.width,i.height))return;const s=this._getInternalData(),l=(0,o.ensureNotNull)(this.rotation()),d=(0,n.point)(l.x*r,l.y*a);t.save(),0!==l.angle&&(t.translate(d.x,d.y),t.rotate(l.angle),t.translate(-d.x,-d.y));const u=this._getFontInfo().fontSize;t.textBaseline=s.textBaseLine,t.textAlign=s.textAlign,t.font=this.fontStyle();const{scaledLeft:g,scaledRight:x,scaledTop:f,scaledBottom:_}=function(t,e){const{horizontalPixelRatio:i,verticalPixelRatio:n}=e,o=Math.round(t.boxLeft*i),r=Math.round(t.boxTop*n);return{scaledLeft:o,scaledRight:o+Math.round(t.boxWidth*i),scaledTop:r,scaledBottom:r+Math.round(t.boxHeight*n)}}(s,e),p=this._data.borderWidth||Math.max(u/12,1),b=Math.round(p*r),w=b/2;if(this._data.backgroundColor||this._data.borderColor){let e=!1;if(this._data.boxShadow){t.save();const{shadowColor:i,shadowBlur:n,shadowOffsetX:o=0,shadowOffsetY:s=0}=this._data.boxShadow;t.shadowColor=i,t.shadowBlur=n*r,t.shadowOffsetX=o*r,t.shadowOffsetY=s*a,e=!0}if(this._data.backgroundRoundRect){const{borderColor:i,backgroundColor:n,backgroundRoundRect:o}=this._data;n&&((0,h.drawRoundRect)(t,g,f,x-g,_-f,o*r),t.closePath(),t.fillStyle=n,t.fill(),e&&(t.restore(),e=!1)),i&&((0,h.drawRoundRect)(t,g-w,f-w,x-g+b,_-f+b,o*r+b),t.closePath(),t.strokeStyle=i,t.lineWidth=b,t.stroke(),e&&t.restore())}else{const{borderColor:i,backgroundColor:n}=this._data;n&&(t.fillStyle=n,t.fillRect(g,f,x-g,_-f),e&&(t.restore(),e=!1)),i&&(t.strokeStyle=i,t.lineWidth=b,t.beginPath(),t.moveTo(g-w,f-w),t.lineTo(g-w,_+w),t.lineTo(x+w,_+w),t.lineTo(x+w,f-w),t.lineTo(g-w,f-w),t.closePath(),t.stroke(),e&&t.restore())}}this._drawSelectionIfNeeded(t,e),t.fillStyle=this._data.color;const P=(g+Math.round(s.textHorizStart*r))/r,T=.05*u;let m=(f+Math.round((s.textVertStart+T)*a))/a;const S=y(this._data),H=this.getLinesInfo();for(const e of H.lines)(0,c.drawScaled)(t,r,a,(()=>t.fillText(e.text,P,m))),m+=u+S;if(this._data.decorator?.draw(t,e,this._data,s),this._data.outlineBorder){const{outlineBorder:{width:e,color:i}}=this._data,n=Math.round(e*r),o=this._data.borderColor?b:0,a={x:g-o,y:f-o,w:x-g+2*o,h:_-f+2*o},s=new Path2D;s.rect(a.x-n,a.y-n,a.w+2*n,a.h+2*n),s.rect(a.x,a.y,a.w,a.h),t.fillStyle=i,t.fill(s,"evenodd")}t.restore()}getPolygonPoints(){if(null!==this._polygonPoints)return this._polygonPoints;if(null===this._data)return[];const t=this._data.angle||0,{boxLeft:e,boxTop:i,boxWidth:o,boxHeight:r}=this._getBox(),a=this._getRotationPoint();return this._polygonPoints=[p((0,n.point)(e,i),a,t),p((0,n.point)(e+o,i),a,t),p((0,n.point)(e+o,i+r),a,t),p((0,n.point)(e,i+r),a,t)],this._polygonPoints}centerTextRotation(){if(null===this._centerTextRotationPoint&&null!==this._data){const t=this._data.angle??0,e=this._getRotationPoint(),{textLeft:i,textTop:o,textRight:r,textBottom:a}=this._getInternalData(),s=p((0,n.point)((i+r)/2,(o+a)/2),e,t);this._centerTextRotationPoint={x:s.x,y:s.y,angle:t}}
return this._centerTextRotationPoint}rotation(){if(null===this._rotationPoint&&null!==this._data){const t=this._data.angle??0,e=this._getRotationPoint();this._rotationPoint={x:e.x,y:e.y,angle:t}}return this._rotationPoint}getLinesInfo(){if(null===this._linesInfo){const t=(0,o.ensureNotNull)(this._data),e=this._wordWrap(t.text,this.fontStyle(),this._textWidthCache,!1,t.wordWrapWidth);let i=e.filter((t=>!t.hidden));if(void 0!==t.maxHeight){const e=function(t){const e=(0,o.ensureDefined)(t.maxHeight),i=m(t),n=y(t);return Math.floor((e+n)/(i+n))}(t);i.length>e&&(i=i.slice(0,e))}this._linesInfo={linesMaxWidth:this._getLinesMaxWidth(i),linesIncludingHidden:e,lines:i}}return this._linesInfo}positionToCoordinate(t){const e=(0,o.ensureNotNull)(this._data),i=this._getInternalData(),n=this.getLinesInfo(),{x:r,y:a,lineNumber:s}=(0,d.getSymbolCoordinatesInfo)({symbolPosition:t,textWidth:i.textRight-i.textLeft,textByLines:n.linesIncludingHidden,lineHeight:m(e),font:this.fontStyle(),textAlign:i.textAlign,lineSpacing:this.lineSpacing()});return{x:r+i.textLeft,y:a+i.textTop,lineNumber:s}}_getInternalData(){if(null!==this._internalData)return this._internalData;const t=(0,o.ensureNotNull)(this._data),{boxLeft:e,boxTop:i,boxWidth:n,boxHeight:r,textBoxWidth:l,textBoxHeight:h}=this._getBox(),d=P(t),c=T(t),u=b(t),g=t.decorator?.geometry(t),x=g?.width??0,f=0===t.text.length?0:g?.decoratorAndTextMargin??0,_=g?.ignoreRtl,p=x+f;let w;const y=i+u+m(t)/2;let S;const H=(0,a.isRtl)(),W=H&&!_,R=W?e+n-c-x:e+d;switch((0,o.ensureDefined)(t.horzTextAlign)){case s.HorizontalAlign.Left:S="start",w=R+p,H&&(t.forceTextAlign?S="left":(w=W?R-f:e+n-c,S="right"));break;case s.HorizontalAlign.Center:S="center";const i=n-d-c-p;w=W?R-f-i/2:R+p+i/2;break;case s.HorizontalAlign.Right:S="end",w=W?R-f:e+n-c,H&&t.forceTextAlign&&(S="right")}return this._internalData={boxLeft:e,boxTop:i,boxWidth:n,boxHeight:r,textBoxWidth:l,textBoxHeight:h,textLeft:e+d+(W?0:p),textRight:e+n-c-(W?p:0),textTop:i+u,textBottom:i+r-u,textHorizStart:w-e,textVertStart:y-i,textAlign:S,textBaseLine:"middle",decoratorLeft:R,decoratorWidth:x},this._internalData}_getFontInfo(){if(null===this._fontInfo){const t=(0,o.ensureNotNull)(this._data),e=m(t),i=`${t.bold?"bold ":""}${t.italic?"italic ":""}${e}px ${t.font}`;this._fontInfo={fontStyle:i,fontSize:e}}return this._fontInfo}_drawSelectionIfNeeded(t,e){const i=(0,o.ensureNotNull)(this._data),n=m((0,o.ensureNotNull)(this._data));if(i.selectionHighlight){const o=this.positionToCoordinate(i.selectionHighlight.start),r=this.positionToCoordinate(i.selectionHighlight.end),a=this._getInternalData();(0,d.drawSelection)(t,e,{lines:this.getLinesInfo().linesIncludingHidden,selectionStart:o,selectionEnd:r,left:a.textLeft,right:a.textRight,color:i.selectionHighlight.color,font:this.fontStyle(),lineHeight:n,lineSpacing:this.lineSpacing()})}}_getLinesMaxWidth(t){const e=this.fontStyle();if(null!==this._data&&this._data.wordWrapWidth&&!this._data.forceCalculateMaxLineWidth)return this._data.wordWrapWidth*H(this._data);let i=0;for(const n of t)i=Math.max(i,(0,
c.measureText)(n.text,e,this._textWidthCache).width);return i}_getBoxSize(){if(null===this._boxSize){const t=this.getLinesInfo(),e=(0,o.ensureNotNull)(this._data),i=function(t,e){const i=t.decorator?.geometry(t),n=Math.round(e+P(t)+T(t)+(i?.width??0)+(0===t.text.length?0:i?.decoratorAndTextMargin??0));return n%2?n+1:n}(e,t.linesMaxWidth),n=function(t,e){return m(t)*e+y(t)*(e-1)+2*b(t)}(e,t.lines.length);this._boxSize={textBoxWidth:i,textBoxHeight:n,boxWidth:e.boxWidth??i,boxHeight:e.boxHeight??n}}return this._boxSize}_getBox(){if(this._box)return this._box;const t=(0,o.ensureNotNull)(this._data),[e]=(0,o.ensureDefined)(t.points),{boxWidth:i,boxHeight:n,textBoxWidth:r,textBoxHeight:a}=this._getBoxSize();let{y:l,x:h}=e;switch(t.vertAlign){case s.VerticalAlign.Bottom:l-=n+t.offsetY;break;case s.VerticalAlign.Middle:l-=n/2;break;case s.VerticalAlign.Top:l+=t.offsetY}switch(t.horzAlign){case s.HorizontalAlign.Left:h+=t.offsetX;break;case s.HorizontalAlign.Center:h-=i/2;break;case s.HorizontalAlign.Right:h-=i+t.offsetX}return this._box={boxLeft:h,boxTop:l,boxWidth:i,boxHeight:n,textBoxWidth:r,textBoxHeight:a}}_getRotationPoint(){const{boxLeft:t,boxTop:e,boxWidth:i,boxHeight:r}=this._getBox(),{horzAlign:a,vertAlign:l}=(0,o.ensureNotNull)(this._data);let h,d;switch(a){case s.HorizontalAlign.Center:h=t+i/2;break;case s.HorizontalAlign.Left:h=t;break;case s.HorizontalAlign.Right:h=t+i}switch(l){case s.VerticalAlign.Middle:d=e+r/2;break;case s.VerticalAlign.Top:d=e;break;case s.VerticalAlign.Bottom:d=e+r}return(0,n.point)(h,d)}}},729813:(t,e,i)=>{i.d(e,{wordWrapCached:()=>s});var n=i(259332),o=i(169958),r=i(989533);function a(t,e,i,n=!0,o){return`${e}_${n}_${o}_${t}`}function s(t=10){const e=n.default.Cache;n.default.Cache=o.CircularCacheBuffer.bind(o.CircularCacheBuffer,t);const i=(0,n.default)(r.wordWrap,a);return n.default.Cache=e,i}},989533:(t,e,i)=>{i.d(e,{wordWrap:()=>l});var n=i(536794),o=i(127707),r=i(436465);function a(t){const e=[];do{const i=t.match(/\s+/);if(!i||void 0===i.index||-1===i.index){e.push({word:t,spaces:""});break}e.push({word:t.slice(0,i.index),spaces:i[0]}),t=t.slice(i.index+i[0].length)}while(t.length);return e}function s(t,e,i,n){const a=[],s=[];for(let e=0;e<t.length;++e)s.push(e);for(;t.length;){const l=Math.max(1,(0,o.upperbound)(s,n,((n,o)=>(0,r.measureText)(t.slice(0,o+1),e,i).width>n),0,t.length));a.push(t.slice(0,l)),t=t.slice(l)}return a}function l(t,e,i,o=!0,l){l=(0,n.isString)(l)?parseInt(l):l;const h=(t+="").split(/\r\n|\r|\n|$/).map((t=>({text:t,hidden:!1,wrappedLinePart:!1,wrappedLineEnd:!1})));if(!(0,n.isNumber)(l)||!isFinite(l)||l<=0)return h;if((0,r.measureText)("x",e,i).width>l)return h;const d=[];for(let t=0;t<h.length;t++){const n=h[t];if((0,r.measureText)(n.text,e,i).width<=l){d.push(n);continue}const c=a(n.text),u=!0;let g="",x=0;for(;x<c.length;){const t=c[x];let n=`${g}${t.word}`,a=(0,r.measureText)(n,e,i).width;if(a>l){if(""!==g)d.push({text:g,hidden:!1,wrappedLinePart:u,wrappedLineEnd:!1}),g="";else if(1===n.length)d.push({text:n,hidden:!1,wrappedLinePart:u,wrappedLineEnd:!0
}),t.word="";else{const o=s(n,e,i,l);for(let t=0;t<o.length-1;t+=1)d.push({text:o[t],hidden:!1,wrappedLinePart:u,wrappedLineEnd:!1});t.word=o[o.length-1]}continue}let h=n.length;if(n=`${g}${t.word}${t.spaces}`,a=(0,r.measureText)(n,e,i).width,a<l){g=n,x+=1;continue}const f=s(n,e,i,l);for(let t=0;t<f.length;t+=1){const e=f[t];h-=e.length;const i={text:e,hidden:t>0,wrappedLinePart:u,wrappedLineEnd:x===c.length-1&&t===f.length-1};i.hidden&&o||d.push(i)}g="",x+=1}""!==g&&d.push({text:g,wrappedLinePart:u,hidden:!1,wrappedLineEnd:!0})}return d}}}]);