"use strict";(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[25214],{625214:(e,t,i)=>{i.d(t,{linking:()=>f});var s=i(290484),n=i(650151),r=i(735566),o=i(77294),a=(i(687037),i(666310)),l=i(104779),u=i(4944),c=i(804804);var h=i(62802),d=i(588948),y=i(503447),b=i(484498),S=i(473552),_=i(776734);var m=i(736800),p=i(897103),g=i(912445);const v=(0,r.getLogger)("Linking");class w{constructor(e,t,i){this.watchedSymbols=new o.WatchedValue([]),this.watchedSymbol=new o.WatchedValue,this.seriesShortSymbol=new o.WatchedValue,this.proSymbol=new o.WatchedValue,this.ensuredProSymbol=new o.WatchedValue,this.watchedInterval=new o.WatchedValue,this.watchedIntraday=new o.WatchedValue,this.watchedSeconds=new o.WatchedValue,this.watchedTicks=new o.WatchedValue,this.watchedDataFrequencyResolution=new o.WatchedValue,this.watchedRange=new o.WatchedValue,this.watchedSupportedResolutions=new o.WatchedValue,this.watchedSupportedChartStyles=new o.WatchedValue,this.symbolNamesList=new o.WatchedValue,this._chartWidgetCollection=null,this._chartWidgetBindingState=0,this._activeChartWidget=null,this._linkingGroupCharts=null,this._boundChartWidget=null,this._watchedSymbolListenerBound=this._watchedSymbolListener.bind(this),this._watchedIntervalListenerBound=this._watchedIntervalListener.bind(this),this._setGroupSymbolCancellationToken={cancelled:!1},this._muted=!1,this.updateBoundChartWidget=()=>{const e=this._chartToBind();e!==this._boundChartWidget&&(null===e?this.unbindFromChartWidget():this.bindToChartWidget(e))},this._updateAllGroupChartWidgets=()=>{this._destroySymbolIntervalPropertySubscriptions?.();const e=(0,n.ensureNotNull)(this._linkingGroupCharts).value(),t=[],i=[];for(const s of e){const e=s.symbolWV().spawn(),n=s.resolutionWV().spawn();e.subscribe(this._updateSymbolByProperty.bind(this,s)),n.subscribe(this._updateIntervalByProperty.bind(this,s)),t.push(e),i.push(n)}this._destroySymbolIntervalPropertySubscriptions=()=>{t.forEach((e=>e.destroy())),i.forEach((e=>e.destroy())),this._destroySymbolIntervalPropertySubscriptions=void 0};const s=this.watchedSymbol.value();e.length>1&&this._needApplySymbol(s)&&!this._muted&&this._setGroupSymbol(s);const r=this.watchedInterval.value();e.length>1&&this._needApplyInterval(r)&&!this._muted&&this._setGroupInterval(r),this.updateBoundChartWidget()},this._groupIndex=e;const s=(e,t)=>{e.subscribe((e=>{i()===this&&t.setValue(e)}),{callWithLast:!0})};s(this.watchedSymbols,t.watchedSymbols),s(this.watchedSymbol,t.watchedSymbol),s(this.seriesShortSymbol,t.seriesShortSymbol),s(this.proSymbol,t.proSymbol),s(this.ensuredProSymbol,t.ensuredProSymbol),s(this.watchedInterval,t.watchedInterval),s(this.watchedIntraday,t.watchedIntraday),s(this.watchedSeconds,t.watchedSeconds),s(this.watchedTicks,t.watchedTicks),s(this.watchedDataFrequencyResolution,t.watchedDataFrequencyResolution),s(this.watchedRange,t.watchedRange),s(this.watchedSupportedResolutions,t.watchedSupportedResolutions),s(this.watchedSupportedChartStyles,t.watchedSupportedChartStyles),s(this.symbolNamesList,t.symbolNamesList),
this.watchedSymbol.subscribe((e=>{this._boundChartWidget&&this._boundChartWidget.hasModel()&&this.mainSeries().symbolSameAsCurrent(e)||this.proSymbol.setValue(e)}),{callWithLast:!0})}mute(e){this._muted=e}bindToChartWidgetCollection(e){this.unbindFromChartWidgetCollection(),this._chartWidgetCollection=e,this._activeChartWidget=e.activeChartWidget.spawn(),this._activeChartWidget.subscribe(this.updateBoundChartWidget),this._linkingGroupCharts=e.linkingGroupsCharts(this._groupIndex).spawn(),this._linkingGroupCharts.subscribe(this._updateAllGroupChartWidgets),this.updateBoundChartWidget(),this._updateAllGroupChartWidgets();const t=function(e){const t=(0,u.combine)((()=>e.getAll().filter((e=>e.isVisible()&&e.hasModel())).map((e=>(0,c.createWVFromGetterAndSubscription)((()=>e.model().mainSeries().symbol()),e.model().mainSeries().symbolResolved()).ownership()))),e.chartModels().weakReference(),e.layout.weakReference());return(0,u.accumulate)((e=>e),t.ownership())}(e);t.subscribe((e=>{this.watchedSymbols.setValue(e)})),this.watchedSymbols.setValue(t.value())}unbindFromChartWidgetCollection(){this.unbindFromChartWidget(),this._chartWidgetCollection=null,this._activeChartWidget?.destroy(),this._activeChartWidget=null,this._linkingGroupCharts?.destroy(),this._linkingGroupCharts=null,this._destroySymbolIntervalPropertySubscriptions?.()}bindToChartWidget(e){if(this.unbindFromChartWidget(),this._boundChartWidget=e,e.hasModel())return void this._onChartModelCreated(e.model());e.modelCreated().subscribe(this,this._onChartModelCreated,!0),this._chartWidgetBindingState=1;const t=e.mainSeriesProperties().childs();this.watchedSymbol.setValue(t.symbol.value()),this.watchedInterval.setValue(t.interval.value()),this._boundChartWidget.linkingGroupIndex().subscribe(this.updateBoundChartWidget)}unbindFromChartWidget(){const e=this._boundChartWidget;if(null!==e){switch(this._chartWidgetBindingState){case 1:e.modelCreated().unsubscribeAll(this);break;case 2:this.watchedSymbol.unsubscribe(this._watchedSymbolListenerBound);const t=this.mainSeries().dataEvents();t.symbolResolved().unsubscribeAll(this),t.symbolError().unsubscribeAll(this),this.mainSeries().onIntervalChanged().unsubscribeAll(this),this.watchedInterval.unsubscribe(this._watchedIntervalListenerBound),delete this.watchedSymbol.writeLock}e.linkingGroupIndex().unsubscribe(this.updateBoundChartWidget),this._boundChartWidget=null,this._chartWidgetBindingState=0}}boundChartWidget(){return this._boundChartWidget}mainSeries(){if(!this._boundChartWidget)throw new Error("ChartWidget is undefined");return this._boundChartWidget.model().mainSeries()}_watchedSymbolListener(e){this._needApplySymbol(e)&&!this._muted&&this._setGroupSymbol(e)}_updateSymbolByProperty(e,t){const i=this._symbolLock();i&&this._needApplySymbol(t)&&!this._muted&&this._setGroupSymbol(t),(i||e===this._boundChartWidget)&&this.watchedSymbol.setValue(t)}_watchedIntervalListener(e){const t=a.Interval.normalize(e);t&&this._needApplyInterval(t)&&!this._muted&&this._setGroupInterval(t)}_updateIntervalByProperty(e,t){
const i=this._intervalLock(),s=a.Interval.normalize(t);i&&s&&this._needApplyInterval(s)&&!this._muted&&this._setGroupInterval(s),(i||e===this._boundChartWidget)&&this.watchedInterval.setValue(s??t)}_updateSeriesSymbolInfo(){this.seriesShortSymbol.setValue((0,n.ensureNotNull)(this._boundChartWidget).getSymbol(!0));const e=this.mainSeries().symbolInfo();if(e){const t=e.pro_name||!1;this.proSymbol.setValue(t||this.watchedSymbol.value()),this.ensuredProSymbol.setValue(this.proSymbol.value()),e.aliases&&this.symbolNamesList.setValue(e.aliases);let i=(0,p.allChartStyles)();((0,l.isCloseBasedSymbol)(e)||this.mainSeries().intervalObj().value().is1Tick())&&(i=i.filter((e=>(0,l.isSingleValueBasedStyle)(e)))),"hlc"===e.visible_plots_set&&(i=i.filter((e=>(0,l.isHLCBasedStyle)(e)||(0,l.isSingleValueBasedStyle)(e)))),this.watchedSupportedChartStyles.setValue(i),this.watchedIntraday.setValue(!!e.has_intraday),this.watchedSeconds.setValue(!!e.has_seconds),this.watchedTicks.setValue(!(0,l.isCloseBasedSymbol)(e)&&!!e["is-tickbars-available"]),this.watchedRange.setValue(!(0,l.isCloseBasedSymbol)(e));const s=e.data_frequency?e.data_frequency:void 0;this.watchedDataFrequencyResolution.setValue(s)}else this.watchedIntraday.setValue(!1),this.watchedSeconds.setValue(!1),this.watchedTicks.setValue(!1),this.watchedRange.setValue(!1),this.mainSeries().isFailed()&&this.ensuredProSymbol.setValue(this.proSymbol.value())}_onChartModelCreated(e){if(!this._boundChartWidget)throw new Error("ChartWidget is undefined");this._chartWidgetBindingState=2,this.watchedSymbol.setValue(this._boundChartWidget.symbolWV().value()),this.watchedSymbol.subscribe(this._watchedSymbolListenerBound);const t=e.mainSeries().dataEvents();t.symbolResolved().subscribe(this,this._updateSeriesSymbolInfo),t.symbolError().subscribe(this,this._updateSeriesSymbolInfo),e.mainSeries().onIntervalChanged().subscribe(this,this._updateSeriesSymbolInfo),this._updateSeriesSymbolInfo(),this.watchedInterval.setValue(this._boundChartWidget.resolutionWV().value()),this.watchedInterval.subscribe(this._watchedIntervalListenerBound),this._boundChartWidget.readOnly()&&(this.watchedSymbol.writeLock=!0)}_chartToBind(){const e=this._chartWidgetCollection;return null===e?null:e.activeChartWidget.value().linkingGroupIndex().value()===this._groupIndex?e.activeChartWidget.value():null!==this._boundChartWidget&&this._boundChartWidget.linkingGroupIndex().value()===this._groupIndex?this._boundChartWidget:e.getAll().find((e=>e.linkingGroupIndex().value()===this._groupIndex))??null}_symbolLock(){return!!this._chartWidgetCollection?.lock.symbol.value()}_intervalLock(){return!!this._chartWidgetCollection?.lock.interval.value()}_chartsForLock(e){return(0===e?this._symbolLock():this._intervalLock())?(0,n.ensureNotNull)(this._linkingGroupCharts).value():this._boundChartWidget?[this._boundChartWidget]:[]}_setGroupSymbol(e){this.mute(!0),this._setGroupSymbolCancellationToken.cancelled=!0;const t=this._setGroupSymbolCancellationToken={cancelled:!1};(0,
n.ensureNotNull)(this._chartWidgetCollection).setSymbol(e,this._groupIndex,(0,n.ensureNotNull)(this._boundChartWidget)).finally((()=>{if(this._boundChartWidget&&!t.cancelled){const t=this._boundChartWidget.model().mainSeries();t.symbolSameAsCurrent(e)||(this.watchedSymbol.setValue(t.symbol()),this.proSymbol.setValue(t.proSymbol()))}})),this.mute(!1)}_needApplySymbol(e){const t=this._chartsForLock(0),i=t.find((t=>t.hasModel()&&t.model().mainSeries().symbolInfo()&&t.model().mainSeries().symbolSameAsResolved(e)));if(i){const e=i.model().mainSeries();if(t.every((t=>e.symbolSameAsResolved(t.symbolWV().value()))))return!1}return t.some((t=>t.symbolWV().value()!==e))}_setGroupInterval(e){this.mute(!0),(0,n.ensureNotNull)(this._chartWidgetCollection).setResolution(e,this._groupIndex).finally((()=>{if(this._boundChartWidget){const t=this._boundChartWidget.resolutionWV().value();a.Interval.isEqual(t,e)||this.watchedInterval.setValue(t)}})),this.mute(!1)}_needApplyInterval(e){return this._chartsForLock(1).some((t=>!a.Interval.isEqual(t.resolutionWV().value(),e)))}}const f=new class{constructor(){this._watchedSymbols=new o.WatchedValue([]),this._watchedSymbol=new o.WatchedValue,this._seriesShortSymbol=new o.WatchedValue,this._proSymbol=new o.WatchedValue,this._ensuredProSymbol=new o.WatchedValue,this._watchedInterval=new o.WatchedValue,this._watchedIntraday=new o.WatchedValue,this._watchedSeconds=new o.WatchedValue,this._watchedTicks=new o.WatchedValue,this._watchedDataFrequencyResolution=new o.WatchedValue,this._watchedRange=new o.WatchedValue,this._watchedSupportedResolutions=new o.WatchedValue,this._watchedSupportedChartStyles=new o.WatchedValue([]),this._symbolNamesList=new o.WatchedValue,this._chartWidgetCollection=null,this._onSymbolLinkBound=this._onSymbolLink.bind(this),this._searchCharts=null,this._searchChartsLoadDebounced=null,this._selfEmit=!1,this._preventFeedBySymbol=!1,this._feedBySymbolDebounceCounter=0,this._linkingGroups=new Map,this._activeLinkingGroup=new o.WatchedValue,this._activeLinkingGroupIndex=null,this._updateLinkingGroups=()=>{(0,n.ensureNotNull)(this._chartWidgetCollection).allLinkingGroups().value().forEach((e=>this._linkingGroup(e))),this._linkingGroups.forEach((e=>e.updateBoundChartWidget()))},this._activeLinkingGroup.setValue(this._linkingGroup(null));const e=(e,t)=>{e.subscribe((e=>t().setValue(e)),{callWithLast:!0})};e(this._watchedSymbols,(()=>this._activeLinkingGroup.value().watchedSymbols)),e(this._watchedSymbol,(()=>this._activeLinkingGroup.value().watchedSymbol)),e(this._seriesShortSymbol,(()=>this._activeLinkingGroup.value().seriesShortSymbol)),e(this._proSymbol,(()=>this._activeLinkingGroup.value().proSymbol)),e(this._ensuredProSymbol,(()=>this._activeLinkingGroup.value().ensuredProSymbol)),e(this._watchedInterval,(()=>this._activeLinkingGroup.value().watchedInterval)),e(this._watchedIntraday,(()=>this._activeLinkingGroup.value().watchedIntraday)),e(this._watchedSeconds,(()=>this._activeLinkingGroup.value().watchedSeconds)),
e(this._watchedTicks,(()=>this._activeLinkingGroup.value().watchedTicks)),e(this._watchedDataFrequencyResolution,(()=>this._activeLinkingGroup.value().watchedDataFrequencyResolution)),e(this._watchedRange,(()=>this._activeLinkingGroup.value().watchedRange)),e(this._watchedSupportedResolutions,(()=>this._activeLinkingGroup.value().watchedSupportedResolutions)),e(this._watchedSupportedChartStyles,(()=>this._activeLinkingGroup.value().watchedSupportedChartStyles)),e(this._symbolNamesList,(()=>this._activeLinkingGroup.value().symbolNamesList));const t=e=>{this._watchedSymbol.setValue(e.watchedSymbol.value()),this._seriesShortSymbol.setValue(e.seriesShortSymbol.value()),this._proSymbol.setValue(e.proSymbol.value()),this._ensuredProSymbol.setValue(e.ensuredProSymbol.value()),this._watchedInterval.setValue(e.watchedInterval.value()),this._watchedIntraday.setValue(e.watchedIntraday.value()),this._watchedSeconds.setValue(e.watchedSeconds.value()),this._watchedTicks.setValue(e.watchedTicks.value()),this._watchedDataFrequencyResolution.setValue(e.watchedDataFrequencyResolution.value()),this._watchedRange.setValue(e.watchedRange.value()),this._watchedSupportedResolutions.setValue(e.watchedSupportedResolutions.value()),this._watchedSupportedChartStyles.setValue(e.watchedSupportedChartStyles.value()),this._symbolNamesList.setValue(e.symbolNamesList.value())};this._activeLinkingGroup.subscribe(t),t(this._activeLinkingGroup.value()),(0,g.setMuteLinkingGroup)(((e,t)=>{this._linkingGroup(e).mute(t)}))}get symbols(){return this._watchedSymbols}get symbol(){return this._watchedSymbol}get proSymbol(){return this._proSymbol.readonly()}get ensuredProSymbol(){return this._ensuredProSymbol.readonly()}get symbolNamesList(){return this._symbolNamesList.readonly()}get seriesShortSymbol(){return this._seriesShortSymbol.readonly()}get interval(){return this._watchedInterval}get intraday(){return this._watchedIntraday.readonly()}get seconds(){return this._watchedSeconds.readonly()}get ticks(){return this._watchedTicks.readonly()}get range(){return this._watchedRange.readonly()}get supportedResolutions(){return this._watchedSupportedResolutions.readonly()}get supportedChartStyles(){return this._watchedSupportedChartStyles.readonly()}get preventFeedBySymbol(){return this._preventFeedBySymbol}get dataFrequencyResolution(){return this._watchedDataFrequencyResolution.readonly()}activeLinkingGroup(){return this._activeLinkingGroup.readonly()}getChartWidget(){return this.activeLinkingGroup().value().boundChartWidget()}bindToChartWidgetCollection(e){this._chartWidgetCollection?.onAboutToBeDestroyed.unsubscribeAll(this),this._unbindFromChartWidgetCollection(),this._chartWidgetCollection=e,this._chartWidgetCollection.onAboutToBeDestroyed.subscribe(this,this._unbindFromChartWidgetCollection),this._chartWidgetCollection.allLinkingGroups().subscribe(this._updateLinkingGroups),this._updateLinkingGroups(),this._activeLinkingGroupIndex=e.activeLinkingGroup().spawn(),this._activeLinkingGroupIndex.subscribe((e=>{
this._activeLinkingGroup.setValue(this._linkingGroup(e))}),{callWithLast:!0}),this._linkingGroups.forEach((t=>t.bindToChartWidgetCollection(e)))}bindToSearchCharts(e){this.unbindFromSearchCharts(),this._searchCharts=e,e.onSearchBySymbol.subscribe(this,this._onSearchBySymbol),e.loadingSymbol.subscribe((e=>{!1===e&&(this._feedBySymbolDebounceCounter=0)})),this._watchedSymbol.subscribe(this._onSymbolLinkBound)}unbindFromSearchCharts(){this._searchCharts&&(this._searchCharts.onSearchBySymbol.unsubscribe(this,this._onSearchBySymbol),this._watchedSymbol.unsubscribe(this._onSymbolLinkBound),this._searchCharts=null)}setPreventFeedBySymbol(e){this._preventFeedBySymbol=e}setSymbolAndLogInitiator(e,t,i,s=!1){var n,r,o,a;(this.symbol.value()!==e||i)&&(v.logInfo(`Change linking symbol to ${e}, initiator: ${t}`),this.symbol.setValue(e,i),s||null===this._chartWidgetCollection||(n=this.activeLinkingGroup().value().mainSeries(),r=this._chartWidgetCollection.layout.value(),o=this._chartWidgetCollection.metaInfo.uid.value()||"",a=t,window.user.do_not_track||n.symbolResolvingActive().subscribe((e=>{if(e)return;const t=n.symbolInfo();t&&(0,_.getTracker)().then((e=>{null!==e&&e.trackChartSymbols({symbolName:t.pro_name,symbolType:t.type,resolution:n.interval(),layoutType:r,chartId:o,chartStyles:y.STYLE_SHORT_NAMES[n.style()],openSource:a,platform:(0,b.getPlatform)(),isExpert:window.user.declared_status===S.UserStatus.Pro})}))}),{once:!0})))}setIntervalAndLogInitiator(e,t){a.Interval.isEqual(this.interval.value(),e)||((0,m.trackIntervalChanging)(e,t),this.interval.setValue(e))}_onSearchBySymbol(e){if(!e.resolved_symbol)throw new Error("no resolved_symbol");this._selfEmit=!0,this._watchedSymbol.setValue(e.resolved_symbol),this._selfEmit=!1}_onSymbolLink(e){if(!this._selfEmit){if(!this._searchCharts){const e="No search charts defined";throw v.logError(e),new Error(e)}this._preventFeedBySymbol||this._loadSearchCharts(e)}}_loadSearchCharts(e){if(!this._searchCharts){const e="No search charts defined";throw v.logError(e),new Error(e)}if(this._searchChartsLoadDebounced)return void(this._feedBySymbolDebounceCounter<100&&(this._feedBySymbolDebounceCounter++,this._searchChartsLoadDebounced(e)));const t=e=>this._searchCharts?(!0===this._searchCharts.loadingSymbol.value()?this._feedBySymbolDebounceCounter<100&&(this._feedBySymbolDebounceCounter++,this._searchChartsLoadDebounced=(0,s.default)(t,2e3),this._searchChartsLoadDebounced(e)):this._searchChartsLoadDebounced=null,this._searchCharts.feedBySymbol.call(this._searchCharts,e)):()=>{};!0===this._searchCharts.loadingSymbol.value()?this._feedBySymbolDebounceCounter<100&&(this._feedBySymbolDebounceCounter++,this._searchChartsLoadDebounced=(0,s.default)(t,2e3),this._searchChartsLoadDebounced(e)):this._searchCharts.feedBySymbol(e)}_linkingGroup(e){let t=this._linkingGroups.get(e);if(void 0===t){const i={watchedSymbols:this._watchedSymbols,watchedSymbol:this._watchedSymbol,seriesShortSymbol:this._seriesShortSymbol,proSymbol:this._proSymbol,ensuredProSymbol:this._ensuredProSymbol,
watchedInterval:this._watchedInterval,watchedIntraday:this._watchedIntraday,watchedSeconds:this._watchedSeconds,watchedTicks:this._watchedTicks,watchedDataFrequencyResolution:this._watchedDataFrequencyResolution,watchedRange:this._watchedRange,watchedSupportedResolutions:this._watchedSupportedResolutions,watchedSupportedChartStyles:this._watchedSupportedChartStyles,symbolNamesList:this._symbolNamesList};t=new w(e,i,(()=>this._activeLinkingGroup.value())),this._linkingGroups.set(e,t),this._chartWidgetCollection&&t.bindToChartWidgetCollection(this._chartWidgetCollection)}return t}_unbindFromChartWidgetCollection(){null!==this._chartWidgetCollection&&(this._activeLinkingGroupIndex?.destroy(),this._activeLinkingGroupIndex=null,this._linkingGroups.forEach((e=>e.unbindFromChartWidgetCollection())),this._chartWidgetCollection.allLinkingGroups().unsubscribe(this._updateLinkingGroups),this._chartWidgetCollection=null)}};{const e=(0,d.getFreshInitData)().symbolInfo,t=e?e.pro_symbol:h.getValue("editchart.model.symbol",window.DEFAULT_SYMBOL);f.setSymbolAndLogInitiator(t,"initial data",!1,!0)}window.TradingViewApi||(window.TradingViewApi={linking:f})},912445:(e,t,i)=>{let s;function n(e,t){s?.(e,t)}function r(e){s=e}i.d(t,{muteLinkingGroup:()=>n,setMuteLinkingGroup:()=>r})},147582:(e,t,i)=>{i.d(t,{sparseUsersTrackingCoefficient:()=>a});var s=i(49437);const n="sparseUsersTrackingCoefficient",r=(0,i(66974).isProd)()?null:s.TVLocalStorage.getItem(n);let o=null!==r?parseFloat(r):null;null!==o&&(!Number.isFinite(o)||o<0||o>1)&&(o=null,s.TVLocalStorage.removeItem(n));const a=o??.1},736800:(e,t,i)=>{i.d(t,{trackIntervalChanging:()=>a});var s=i(584878),n=i(776734),r=i(147582);const o="IntervalChanging";function a(e,t){window.user.do_not_track||(0,s.shouldAffectUser)(o,r.sparseUsersTrackingCoefficient)&&(0,n.getTracker)().then((i=>{null!==i&&i.trackChartIntervalChanging(e,t)}))}},4944:(e,t,i)=>{i.d(t,{accumulate:()=>a,combine:()=>o,combineWithFilteredUpdate:()=>r});var s=i(158942);function n(e,t,...i){let n=null;const r=(...t)=>e(...t.map((e=>e.value())),n?.value()),o=n=new s.WatchedValue(r(...i)),a=()=>{const e=i.map(((e,t)=>e.value()));t(...e)&&o.setValue(r(...i))},l=i.map((e=>e.spawn()));for(const e of l)e.subscribe(a);return o.readonly().spawn((()=>{l.forEach((e=>e.destroy())),i.forEach((e=>e.release()))}))}function r(e,t,...i){return n(e,t,...i)}function o(e,...t){return n(e,(()=>!0),...t)}function a(e,t,...i){let n=null;const r=o(((...e)=>(e.splice(-1),e)),...i),a=t.spawn(),l=(t,...i)=>{const s=t.map((e=>e.value()));return e(s,...i,n?.value())},u=n=new s.WatchedValue(l(a.value(),...r.value()));let c=[];const h=()=>{u.setValue(l(c,...r.value()))},d=e=>{c.forEach((e=>e.destroy())),c=e.map((e=>e.spawn())),c.forEach((e=>e.subscribe(h))),h()};d(a.value()),a.subscribe(d),r.subscribe(h);return u.readonly().spawn((()=>{c.forEach((e=>e.destroy())),a.destroy(),r.destroy(),t.release()}))}},796114:(e,t,i)=>{i.d(t,{isCFDSymbol:()=>s,isStockSymbol:()=>n});function s(e,t){
return Boolean(t?.includes("cfd"))&&["commodity","futures","index","stock","fund"].includes(e)}function n(e,t){return"stock"===e&&void 0!==t&&!t.includes("cfd")&&!t.includes("ndf")}},897103:(e,t,i)=>{i.d(t,{allChartStyles:()=>r});var s=i(687037);const n=(0,i(638456).onWidget)();function r(){return function(){const e=[0,1,9,13,2,14,15,3,16,10];return e.push(12),n||e.push(17),n||e.push(18),n||e.push(20),n||e.push(19),e}().concat(function(){const e=[8];return s.enabled("japanese_chart_styles")&&(e.push(4,7,5,6),e.push(11)),e}())}},442050:(e,t,i)=>{i.d(t,{extractSymbolNameFromSymbolInfo:()=>l});var s=i(687037);const n=s.enabled("pay_attention_to_ticker_not_symbol"),r=s.enabled("charting_library_single_symbol_request"),o=s.enabled("use_ticker_on_symbol_info_update"),a=s.enabled("uppercase_instrument_names");function l(e,t,i,s){let l=e&&(i&&e.pro_name||e.full_name||e.name);return r&&t?l=t:(o||!s&&n)&&e&&e.ticker&&(l=e.ticker),a&&l&&(l=l.toUpperCase()),l}},920713:(e,t,i)=>{i.d(t,{combineProperty:()=>n});var s=i(673378);function n(e,...t){const i=()=>e(...t.map((e=>e.value()))),n=(0,s.createPrimitiveProperty)(i()),r=()=>n.setValue(i()),o={};for(const e of t)e.subscribe(o,r);return n.destroy=()=>{t.forEach((e=>e.unsubscribeAll(o))),t.forEach((e=>e.release()))},n}},55846:(e,t,i)=>{i.d(t,{combineProperty:()=>o.combineProperty,createWVFromGetterAndSubscription:()=>s.createWVFromGetterAndSubscription,createWVFromGetterAndSubscriptions:()=>n.createWVFromGetterAndSubscriptions,createWVFromProperty:()=>r.createWVFromProperty});var s=i(804804),n=i(791638),r=i(707292);i(673378);var o=i(920713)},804804:(e,t,i)=>{i.d(t,{createWVFromGetterAndSubscription:()=>n});var s=i(77294);function n(e,t){const i=new s.WatchedValue(e()),n={};t.subscribe(n,(()=>{i.setValue(e(i.value()))}));return i.readonly().spawn((()=>t.unsubscribeAll(n)))}},791638:(e,t,i)=>{i.d(t,{createWVFromGetterAndSubscriptions:()=>n});var s=i(77294);function n(e,t){const i=new s.WatchedValue(e()),n={};t.forEach((t=>t.subscribe(n,(()=>{i.setValue(e())}))));return i.readonly().spawn((()=>t.forEach((e=>e.unsubscribeAll(n)))))}},707292:(e,t,i)=>{i.d(t,{createWVFromProperty:()=>n});var s=i(804804);function n(e){return(0,s.createWVFromGetterAndSubscription)((()=>e.value()),e)}},503447:(e,t,i)=>{i.r(t),i.d(t,{SERIES_STATUS_TEXT:()=>C,STATUS_CALCULATION_ERROR:()=>g,STATUS_DELAYED:()=>b,STATUS_DELAYED_STREAMING:()=>S,STATUS_EOD:()=>d,STATUS_ERROR:()=>p,STATUS_INVALID_SYMBOL:()=>c,STATUS_LOADING:()=>l,STATUS_NO_BARS:()=>_,STATUS_OFFLINE:()=>o,STATUS_PULSE:()=>y,STATUS_READY:()=>u,STATUS_REPLAY:()=>m,STATUS_RESOLVING:()=>a,STATUS_SNAPSHOT:()=>h,STATUS_UNSUPPORTED_RESOLUTION:()=>v,STYLE_AREA:()=>I,STYLE_BARS:()=>L,STYLE_BASELINE:()=>B,STYLE_CANDLES:()=>W,STYLE_COLUMNS:()=>N,STYLE_HEIKEN_ASHI:()=>R,STYLE_HILO:()=>P,STYLE_HLC_AREA:()=>M,STYLE_HLC_BARS:()=>x,STYLE_HOLLOW_CANDLES:()=>G,STYLE_KAGI:()=>T,STYLE_LINE:()=>k,STYLE_LINE_WITH_MARKERS:()=>D,STYLE_PB:()=>A,STYLE_PNF:()=>E,STYLE_RANGE:()=>F,STYLE_RENKO:()=>V,STYLE_SHORT_NAMES:()=>O,STYLE_STEPLINE:()=>U,SYMBOL_STRING_DATA:()=>H,
chartStylesWithAttachedStudies:()=>z,isChartStyleStudyInfoComplex:()=>Y,seriesLoadingStatuses:()=>f,seriesReadyStatuses:()=>w});var s=i(175468),n=i(735685),r=i(353887);const o=0,a=1,l=2,u=3,c=4,h=5,d=6,y=7,b=8,S=9,_=10,m=11,p=12,g=13,v=14,w=new Set([3,6,7,8,9,11]),f=new Set([1,2]),C={[o]:"connecting",[a]:"loading",[l]:"loading",[u]:"realtime",[c]:"invalid",[h]:"snapshot",[d]:"endofday",[y]:"endofday",[b]:"delayed",[S]:"delayed_streaming",[_]:"forbidden",[m]:"replay",[p]:"error",[g]:"calculation_error",[v]:"unsupported_resolution"},L=0,W=1,k=2,I=3,V=4,T=5,E=6,A=7,R=8,G=9,B=10,F=11,P=12,N=13,D=14,U=15,M=16,x=21,O={0:"bar",1:"candle",9:"hollowCandle",2:"line",14:"lineWithMarkers",15:"stepline",3:"area",16:"hlcArea",4:"renko",7:"pb",5:"kagi",6:"pnf",8:"ha",10:"baseline",11:"range",12:"hilo",13:"column",17:"volFootprint",18:"tpo",19:"volCandles",20:"svp",21:"hlcBars"};function Y(e){return"variants"in e}const q=[{type:n.studyTpoPreriodicId,basicStudyVersion:104},{type:n.studyTpoSessionsId,basicStudyVersion:104}],H={4:{type:"BarSetRenko@tv-prostudies",basicStudyVersion:73},7:{type:"BarSetPriceBreak@tv-prostudies",basicStudyVersion:34},5:{type:"BarSetKagi@tv-prostudies",basicStudyVersion:73},6:{type:"BarSetPnF@tv-prostudies",basicStudyVersion:73},8:{type:"BarSetHeikenAshi@tv-basicstudies",basicStudyVersion:60},11:{type:"BarSetRange@tv-basicstudies",basicStudyVersion:72},17:{type:s.studyVolFootprintId,basicStudyVersion:104},18:{variants:q,selector:e=>{const t=e;return"Day"===t.period&&1===t.periodsNum?q[1]:q[0]}},20:{type:r.studyVbPSessionsId,basicStudyVersion:126}},z=[17,18,20]},104779:(e,t,i)=>{i.d(t,{actualSymbol:()=>ye,chartStyleStudyId:()=>x,createSeriesFormatter:()=>H,displayedSymbolExchange:()=>de,displayedSymbolName:()=>he,extractLineToolSymbolFromSymbolInfo:()=>oe,getChartStyleByResolution:()=>M,getDefaultStyle:()=>U,getLastUsedRawDataStyle:()=>D,getLastUsedSingleValueBasedStyle:()=>N,getLastUsedStyle:()=>P,getSeriesDisplayErrorWV:()=>ke,getSeriesPriceFormattingState:()=>q,getSourceForEconomySymbol:()=>ue,getSymbolDelaySeconds:()=>Ie,getSymbolListedExchange:()=>fe,getSymbolTradedExchange:()=>Ce,getTranslatedChartStyleName:()=>C,hasVolume:()=>ge,isCloseBasedSymbol:()=>_e,isConvertedToOtherCurrency:()=>X,isConvertedToOtherUnit:()=>ee,isEconomicSymbol:()=>ve,isFutureContinuousSymbolWithBackajustment:()=>Le,isFuturesContractSymbol:()=>We,isHLCBasedStyle:()=>R,isMeasureUnitSymbol:()=>me,isPriceSourceStyle:()=>Y,isRangeBasedStyle:()=>W,isRangeStyle:()=>I,isRawDataStyle:()=>G,isRegularSessionId:()=>Se,isRequiringRestartSeriesStyles:()=>L,isSingleValueBasedStyle:()=>A,isSpreadSymbolWithManyLegs:()=>we,isStyleSupportedForReplay:()=>T,isTimeBasedStyle:()=>V,isValidStyle:()=>E,measureUnitId:()=>pe,preparePriceAxisProperties:()=>O,proSymbol:()=>be,setLastUsedRawDataStyle:()=>F,setLastUsedStyle:()=>B,styleChangeRequiresRestart:()=>k,symbolBaseCurrency:()=>j,symbolCurrency:()=>K,symbolCurrencyConvertible:()=>z,symbolHasEconomicEvents:()=>re,symbolHasElectronicSession:()=>se,symbolHasPreOrPostMarket:()=>ie,
symbolHasSeveralSessions:()=>ne,symbolOriginalCurrency:()=>$,symbolOriginalUnit:()=>Z,symbolTitle:()=>ce,symbolTitleSeparator:()=>le,symbolToSaveInState:()=>ae,symbolUnit:()=>Q,symbolUnitConvertibleGroupsIfExist:()=>te});var s=i(444372),n=i(62802),r=i(638456),o=i(519073),a=i(503447),l=i(666310),u=i(698582),c=i(687037),h=i(235614),d=i(754032),y=i(796114),b=i(4944),S=i(55846),_=i(442050);const m=c.enabled("uppercase_instrument_names"),p=c.enabled("hide_object_tree_and_price_scale_exchange_label"),g=[4,5,6,7,8],v=[4,5,6,7,11],w=[0,1,9,19,2,14,15,3,16,21,10,8,12,13,18,17,20],f=[2,14,15,10,3,13,18];function C(e){return{0:s.t(null,void 0,i(527377)),1:s.t(null,void 0,i(745054)),2:s.t(null,void 0,i(903554)),14:s.t(null,void 0,i(409394)),15:s.t(null,void 0,i(869217)),3:s.t(null,void 0,i(534456)),16:s.t(null,void 0,i(99906)),9:s.t(null,void 0,i(913459)),10:s.t(null,void 0,i(259213)),12:s.t(null,void 0,i(498236)),13:s.t(null,void 0,i(655761)),4:s.t(null,void 0,i(188130)),7:s.t(null,void 0,i(743588)),5:s.t(null,void 0,i(383490)),6:s.t(null,void 0,i(276519)),11:s.t(null,void 0,i(855169)),8:s.t(null,void 0,i(863876)),17:s.t(null,void 0,i(292763)),18:s.t(null,void 0,i(617809)),19:s.t(null,void 0,i(193722)),20:s.t(null,void 0,i(383298)),21:s.t(null,void 0,i(800886))}[e]}function L(e){return-1!==g.indexOf(e)}function W(e){return-1!==v.indexOf(e)}function k(e,t){return!I(e)&&!I(t)&&!(e===t||!L(e)&&!L(t))}function I(e){return 11===e}function V(e){return-1!==w.indexOf(e)}function T(e){return 17!==e&&18!==e&&20!==e&&V(e)}function E(e){return W(e)||V(e)}function A(e){switch(e){case 3:case 10:case 2:case 14:case 15:case 13:return!0;default:return!1}}function R(e){switch(e){case 16:case 21:return!0;default:return!1}}function G(e){return!a.SYMBOL_STRING_DATA[e]}function B(e,t){E(e)&&(11!==e&&n.setValue("chart.lastUsedStyle",e),G(e)&&F(e),_e(t)&&A(e)&&n.setValue("chart.lastUsedSingleValueBasedStyle",e))}function F(e){n.setValue("chart.rawDataStyle",e)}function P(){const e=n.getInt("chart.lastUsedStyle");return void 0===e?1:e}function N(){const e=n.getInt("chart.lastUsedSingleValueBasedStyle");return void 0===e?14:e}function D(){return n.getInt("chart.rawDataStyle",1)}function U(e){return e?11:1}function M(e,t){const i=I(t),s=l.Interval.isRange(e);return!i&&s?U(!0):i&&!s?U(!1):t}function x(e,t,i){const s=a.SYMBOL_STRING_DATA[e];if(void 0===s)return null;const n=(0,a.isChartStyleStudyInfoComplex)(s)?s.selector(i??{}):s;return t?`${n.type}-${n.basicStudyVersion}`:n.type}function O(e){const t=e.priceAxisProperties,i=t.lockScale.value(),s=6===e.style.value();(s||i)&&(t.log.setValue(!1),t.percentage.setValue(!1)),t.logDisabled.setValue(!(!s&&!i)),t.percentageDisabled.setValue(!(!s&&!i))}function Y(e){return f.includes(e)}function q(e,t="default",i=!1){let s,n,r,o,a=100,l=1;if("default"===t)null!=e&&(({pricescale:a,minmov:l,minmove2:n,fractional:s}=e),r=e.variable_tick_size||void 0);else{let e=t.split(",");3!==e.length&&(e=["100","1","false"]),a=parseInt(e[0]),l=parseInt(e[1]),s="true"===e[2],o=!0}return i&&(l=1),{priceScale:a,minMove:l,
fractional:s,minMove2:n,variableMinTick:r,ignoreMinMove:i,noExponentialForm:o}}function H(e,t,i=!1){const{priceScale:s,minMove:n,fractional:r,minMove2:o,variableMinTick:a,noExponentialForm:l}=q(e,t,i);if(null!=e){const l=e.format;if("default"===t&&"volume"===l)return new h.VolumeFormatter({precision:2});if("percent"===l)return new d.PercentageFormatter({priceScale:s,minMove:n,fractional:r,minMove2:o,variableMinTick:a,ignoreMinMove:i})}return new u.PriceFormatter({priceScale:s,minMove:n,fractional:r,minMove2:o,variableMinTick:a,ignoreMinMove:i,noExponentialForm:l})}function z(e){return null!==e&&!(0,o.isSpread)(e.type)}function K(e,t,i){if(null===e)return null;const s=!t||i?e.currency_id:e.currency_code;return void 0===s||""===s||"pct"===s?null:s}function $(e,t){const i=t?e.original_currency_code:e.original_currency_id;return"pct"===i?null:i??K(e,t)}function j(e){return e.base_currency_id||null}function X(e){if(null===e||!z(e))return!1;const t=$(e);return null!==t&&t!==K(e)}function J(e,t){return t&&null!==e&&!(0,o.isSpread)(e.type)}function Q(e,t){if(null===e||!t)return null;const i=e.unit_id;return void 0===i||""===i?null:i}function Z(e,t){return t?e.original_unit_id||Q(e,t):null}function ee(e,t){return!(null===e||!J(e,t))&&(void 0!==e.original_unit_id&&e.original_unit_id!==e.unit_id)}function te(e,t){return null!==e&&J(e,t)?e.unit_conversion_types||null:[]}function ie(e){return null!==e&&void 0!==e.subsessions&&e.subsessions.some((e=>"premarket"===e.id||"postmarket"===e.id))}function se(e){return null!==e&&void 0!==e.subsessions&&(e.subsessions.some((e=>"regular"===e.id))&&e.subsessions.some((e=>"us_regular"===e.id)))}function ne(e){return null!==e&&void 0!==e.subsessions&&e.subsessions.filter((e=>!e.private)).length>1}function re(e){return null!==e&&((0,o.isForexSymbol)(e.type)||(0,y.isCFDSymbol)(e.type,e.typespecs)||(0,o.hasCryptoTypespec)(e.typespecs||[]))}function oe(e,t){return(0,_.extractSymbolNameFromSymbolInfo)(e,null,!0,!0)||t}function ae(e,t){return e?e.ticker??e.pro_name??t:t}const le="Â·";function ue(e,t){return ve(e)?e.source2?.description??null:null}function ce(e,t){const i=fe(e);return t||p?e.name:`${e.name} ${le} ${i}`}function he(e){let t=e&&(function(e){return(0,o.isFutures)(e.type)&&e.front_contract||null}(e)||e.name)||"";return t.length>40&&(t=t.substring(0,37)+"..."),t.trim()}function de(e){const t=e?e.exchange:"";return m?t.toUpperCase():t}function ye(e,t){return null!==e?e.full_name:t}function be(e,t){return e?.pro_name??t}function Se(e,t){return["stock","fund","index","dr"].includes(t.type)&&"regular"===e||(0,o.isFutures)(t.type)&&"us_regular"===e}function _e(e){return"c"===e?.visible_plots_set}function me(e){return null!==e&&("unit"===e.measure&&null!==pe(e))}function pe(e){return e?.value_unit_id??null}function ge(e){return"ohlcv"===e.visible_plots_set}function ve(e){return null!==e&&(0,o.isEconomicSymbol)(e.type)}function we(e){return function(e){return null!==e&&(0,o.isSpread)(e.type)}(e)&&(e?.legs??[]).length>1}function fe(e){const t=ue(e);if(null!==t)return t;return(0,r.onWidget)()||(0,
o.isForexSymbol)(e.type)?e.exchange:e.exchange_listed_name??e.exchange}function Ce(e){return e.exchange}function Le(e){return null!==e&&(0,o.isFutures)(e.type)&&Boolean(e.has_backadjustment&&e.typespecs?.includes("continuous"))}function We(e){return null!==e&&(0,o.isFutures)(e.type)&&!Boolean(e.typespecs?.includes("continuous"))}function ke(e){return(0,b.combine)(((t,i,s)=>{switch(t){case 4:{const t=e.seriesErrorMessage();return null!==t&&("resolution_not_entitled"===t||"custom_resolution"===t||"seconds_not_entitled"===t||"ticks_not_entitled"===t||t.startsWith("study_not_auth:"))?null:{type:"invalid_symbol"}}case 13:{const t=e.seriesErrorMessage();return null===t?null:{type:"calculations_error",errorMessage:t}}case 14:{const t=e.unsupportedResolutionState().value();return null===t?null:{type:"unsupported_resolution",reason:t.reason}}case 1:case 2:return null;default:if(i&&null!==s)return s?{type:"ipo_priced"}:{type:"no_data"}}return null}),e.statusWV().weakReference(),(0,S.createWVFromGetterAndSubscription)((()=>!e.bars().size()&&!e.isInReplay().value()),e.dataEvents().dataUpdated()).ownership(),(0,b.combine)(((e,t)=>t?"priced"===e?.ipo_offer_status:null),e.quotesProvider().quotes().weakReference(),e.quotesProvider().completed().weakReference()).ownership())}function Ie(e){return Math.max(0,e?.delay??0)}},735685:(e,t,i)=>{i.d(t,{studyTpoPreriodicId:()=>s,studyTpoSessionsId:()=>n});const s="TPOPeriodic@tv-volumebyprice",n="TPOSessions@tv-volumebyprice"},175468:(e,t,i)=>{i.d(t,{studyVolFootprintId:()=>s});const s="Footprint@tv-volumebyprice"},353887:(e,t,i)=>{i.d(t,{studyVbPSessionsId:()=>s});const s="VbPSessions@tv-volumebyprice"},473552:(e,t,i)=>{i.d(t,{UserStatus:()=>s,getDaysUntilBlock:()=>a,getDaysUntilBlockForUser:()=>o,isUserLockedOut:()=>l});var s,n=i(659935),r=i(258208);!function(e){e.NonPro="non_pro",e.Pro="pro"}(s||(s={}));const o=(0,r.memoize)((()=>window.user.is_trial&&window.user.pro_plan?window.user.is_expert||window.user.declared_status!==s.Pro?n.WEEKLY_SUBSCRIPTION_DAYS_LEN:n.MONTHLY_SUBSCRIPTION_DAYS_LEN:n.WEEKLY_SUBSCRIPTION_DAYS_LEN)),a=(0,r.memoize)((()=>{const e=window.user.declared_status_timestamp;if(!e)return null;const t=((new Date).getTime()-new Date(1e3*e).getTime())/1e3/24/60/60;return o()-Math.floor(t)})),l=(0,r.memoize)((e=>{const t=e??a();return Boolean(null!==t&&t<=0)}))},484498:(e,t,i)=>{i.d(t,{getPlatform:()=>r});var s=i(314802),n=i(638456);function r(){return(0,n.isDesktopApp)()?"desktop":(0,s.isOnMobileAppPage)("old")?"ios":(0,s.isOnMobileAppPage)("new")?"android":"web"}},258208:(e,t,i)=>{function s(e,t){const i=new Map;return function(...s){const n=""+(t?t.apply(null,s):s[0]);if(!i.has(n)){const t=e.apply(this,s);return i.set(n,t),t}return i.get(n)}}i.d(t,{memoize:()=>s})}}]);